{"version":3,"sources":["webpack:///src/app/modules/lessonplan/lessonplan.module.ts","webpack:///src/app/modules/lessonplan/lesson-plan-lists/lesson-plan-lists.component.ts","webpack:///src/app/modules/lessonplan/lesson-plan-lists/lesson-plan-lists.component.html","webpack:///src/app/shared/models/lessonPlan.ts","webpack:///src/app/modules/lessonplan/lesson-plan-create/lesson-plan-create.component.ts","webpack:///src/app/modules/lessonplan/lesson-plan-create/lesson-plan-create.component.html"],"names":["comLists","routes","path","component","canActivate","data","roles","Admin","Teacher","StudentAffair","LessonplanModule","forChild","declarations","imports","exports","LessonPlanListsComponent","_service","routeDirLists","routeName","LessonPlan","routeLink","tableHeader","name","createDate","lastModified","fileSize","action","actionBtns","edit","download","dataLists","objectLabel","limit","page","filter","sortColumn","sortDirection","index","actionLinks","editLink","deleteLink","idKeyname","getLessonList","e","console","log","search","searchData","subscription","subscribe","res","lessonPlans","totalCount","btnLink","unsubscribe","selector","templateUrl","styleUrls","LessonPlanCreateComponent","formBuilder","_ser","_activeRoute","_auth","_router","LessonList","params","lessonPlanId","id","lessonplanForm","group","required","getLessonPlanDetail","push","create","temp","lessonPlan","submitted","invalid","file","onCreate","onEdit","value","lesssonPlan","onCreateLessonPlan","_id","onUpdateLessonPlan","controls","role","currentUserValue","toLocaleLowerCase","navigateByUrl","onSubmit","getfile","cancelLessonPlan"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,c,CAKA;AAIA;;;AAKA,UAAMA,QAAQ,GAAC,CACb,uGADa,EAEb,0GAFa,CAAf;AAKA,UAAMC,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,YADR;AAEEC,iBAAS,EAAE,uGAFb;AAGEC,mBAAW,EAAE,CAAC,gFAAD,CAHf;AAIEC,YAAI,EAAE;AAAEC,eAAK,EAAE,CAAC,oDAAKC,KAAN,EAAY,oDAAKC,OAAjB,EAAyB,oDAAKC,aAA9B;AAAT;AAJR,OADqB,EAOrB;AACEP,YAAI,EAAE,QADR;AAEEC,iBAAS,EAAE,0GAFb;AAGEC,mBAAW,EAAE,CAAC,gFAAD,CAHf;AAIEC,YAAI,EAAE;AAAEC,eAAK,EAAE,CAAC,oDAAKE,OAAN;AAAT;AAJR,OAPqB,EAarB;AACEN,YAAI,EAAE,qBADR;AAEEC,iBAAS,EAAE,0GAFb;AAGEC,mBAAW,EAAE,CAAC,gFAAD,CAHf;AAIEC,YAAI,EAAE;AAAEC,eAAK,EAAE,CAAC,oDAAKE,OAAN;AAAT;AAJR,OAbqB,CAAvB;;UAkCaE,gB;;;;;cAAAA;;;;2BAAAA,gB;AAAgB,S;AAAA,kBAXlB,CACP,4DADO,EAEP,+FAFO,EAGP,6DAAaC,QAAb,CAAsBV,MAAtB,CAHO,EAIP,kEAJO,EAKP,0DALO,CAWkB;;;;4HAAhBS,gB,EAAgB;AAAA,yBAtC3B,uGAsC2B,EArC3B,0GAqC2B;AArCF,oBA2BvB,4DA3BuB,EA4BvB,+FA5BuB,EA4BF,4DA5BE,EA8BvB,kEA9BuB,EA+BvB,0DA/BuB,CAqCE;AANd,oBAhCb,uGAgCa,EA/Bb,0GA+Ba;AAMc,S;AArCF,O;;;;;wEAqCdA,gB,EAAgB;gBAb5B,sDAa4B;iBAbnB;AACRE,wBAAY,EAAE,CAACZ,QAAD,CADN;AAERa,mBAAO,EAAE,CACP,4DADO,EAEP,+FAFO,EAGP,6DAAaF,QAAb,CAAsBV,MAAtB,CAHO,EAIP,kEAJO,EAKP,0DALO,CAFD;AASRa,mBAAO,EAAC,CACNd,QADM;AATA,W;AAamB,U;;;;;;;;;;;;;;;;;;ACrD7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEI;;AACI;;AACI;;AACA;;AAAgB;AAAA;;AAAA;;AAAA;AAAA;;AAAgC;;AACpD;;AAEA;;AAA2C;AAAA;;AAAA;;AAAA;AAAA;;AAAkD;;AAC7F;;AACI;AAAA;;AAAA;;AAAA;AAAA;;AAAmC;;AAC3C;;;;;;AAP6B;;AAAA;;AAIN;;AAAA,kGAAuB,QAAvB,EAAuB,aAAvB;;AACH;;AAAA,kGAAuB,eAAvB,EAAuB,WAAvB,EAAuB,YAAvB,EAAuB,iBAAvB;;;;UDAXe,wB;AA2BX,0CAAoBC,QAApB,EAAiD;AAAA;;AAA7B,eAAAA,QAAA,GAAAA,QAAA;AA1Bb,eAAAC,aAAA,GAAgB;AACrBC,qBAAS,EAAE,CAAC,+DAAgBC,UAAjB,CADU;AAErBC,qBAAS,EAAE;AAFU,WAAhB;AAIA,eAAAC,WAAA,GAAc,CAAC,qDAAMC,IAAP,EAAa,qDAAMC,UAAnB,EAA+B,qDAAMC,YAArC,EAAmD,qDAAMC,QAAzD,EAAmE,qDAAMC,MAAzE,CAAd;AACA,eAAAC,UAAA,GAAa,CAAC,2DAAYC,IAAb,EAAmB,2DAAYC,QAA/B,EAAyC,oEAAzC,CAAb;AACA,eAAAC,SAAA,GAAiB,EAAjB;AAEA,eAAAC,WAAA,GAAmB,CAAC,MAAD,EAAS,aAAT,EAAwB,aAAxB,EAAuC,UAAvC,CAAnB;AAEA,eAAAC,KAAA,GAAa,EAAb;AACA,eAAAC,IAAA,GAAY,CAAZ;AAEA,eAAAC,MAAA,GAAc;AACnBC,sBAAU,EAAE,KAAKJ,WAAL,CAAiB,CAAjB,CADO;AAEnBK,yBAAa,EAAE,KAFI;AAGnBC,iBAAK,EAAE;AAHY,WAAd;AAKA,eAAAC,WAAA,GAAmB;AACxBC,oBAAQ,EAAE,sCADc;AAExBC,sBAAU,EAAE,cAFY;AAGxBC,qBAAS,EAAE;AAHa,WAAnB;AAQ6C;;;;iBAEpD,oBAAQ;AACN,iBAAKC,aAAL;AAED;;;iBAED,qBAAYC,CAAZ,EAAoB;AAClBC,mBAAO,CAACC,GAAR,CAAYF,CAAZ;AACA,iBAAKV,IAAL,GAAYU,CAAZ;AACA,iBAAKD,aAAL;AACD;;;iBAED,kBAASI,MAAT,EAAyB;AACvBF,mBAAO,CAACC,GAAR,CAAYC,MAAZ;AACA,iBAAKC,UAAL,GAAkBD,MAAlB;AACA,iBAAKJ,aAAL;AACD;;;iBAED,kBAASR,MAAT,EAAsB;AACpB,iBAAKA,MAAL,GAAcA,MAAd;AACA,iBAAKQ,aAAL;AACD;;;iBAED,yBAAgB;AAAA;;AACd,iBAAKM,YAAL,GAAoB,KAAKhC,QAAL,CAAc0B,aAAd,CAA4B,KAAKK,UAAjC,EAA6C,KAAKd,IAAlD,EAAwD,KAAKD,KAA7D,EAAoE,KAAKE,MAAL,CAAYC,UAAhF,EAA4F,KAAKD,MAAL,CAAYE,aAAxG,EACjBa,SADiB,CACP,UAACC,GAAD,EAAS;AAClB,mBAAI,CAACpB,SAAL,CAAezB,IAAf,GAAsB6C,GAAG,CAACC,WAA1B;AACA,mBAAI,CAACC,UAAL,GAAkBF,GAAG,CAACE,UAAtB;AACA,mBAAI,CAACtB,SAAL,CAAeT,WAAf,GAA6B,KAAI,CAACA,WAAlC;AACA,mBAAI,CAACS,SAAL,CAAeH,UAAf,GAA4B,KAAI,CAACA,UAAjC;AACA,mBAAI,CAACG,SAAL,CAAeC,WAAf,GAA6B,KAAI,CAACA,WAAlC;AACA,mBAAI,CAACD,SAAL,CAAeuB,OAAf,GAAyB,KAAI,CAACf,WAA9B;AACD,aARiB,CAApB;AASD;;;iBAED,uBAAW;AACT,iBAAKU,YAAL,CAAkBM,WAAlB;AACD;;;;;;;yBAjEUvC,wB,EAAwB,8I;AAAA,O;;;cAAxBA,wB;AAAwB,8C;AAAA,gB;AAAA,e;AAAA,wP;AAAA;AAAA;ACTrC;;AAEI;;AAUJ;;;;AAVS;;AAAA;;;;;;;;;wEDOIA,wB,EAAwB;gBALpC,uDAKoC;iBAL1B;AACTwC,oBAAQ,EAAE,uBADD;AAETC,uBAAW,EAAE,oCAFJ;AAGTC,qBAAS,EAAE,CAAC,mCAAD;AAHF,W;AAK0B,U;;;;;;;;;;;;;;;;;;;;;;AETrC;AAAA;;;AAAA;AAAA;AAAA;;UAAatC,U;;;;;;;;;;;;;;;;;;;ACAb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACcgB;;AAAqC;;AAAa;;;;;;AAAb;;AAAA;;;;;;AAErC;;AAAkD;;AAAyB;;;;;;;;;;UDF9EuC,yB;AAYX,2CAAoBC,WAApB,EAAsDC,IAAtD,EACUC,YADV,EACgDC,KADhD,EACsFC,OADtF,EACuG;AAAA;;AADnF,eAAAJ,WAAA,GAAAA,WAAA;AAAkC,eAAAC,IAAA,GAAAA,IAAA;AAC5C,eAAAC,YAAA,GAAAA,YAAA;AAAsC,eAAAC,KAAA,GAAAA,KAAA;AAAsC,eAAAC,OAAA,GAAAA,OAAA;AAZ/E,eAAA9C,aAAA,GAAqB;AAC1BC,qBAAS,EAAE,CAAC,+DAAgBC,UAAjB,CADe;AAE1BC,qBAAS,EAAE,CAAC,8DAAe4C,UAAhB;AAFe,WAArB;AAYmG;;;;iBAE1G,oBAAQ;AAAA;;AACN,iBAAKH,YAAL,CAAkBI,MAAlB,CAAyBhB,SAAzB,CAAmC,UAAAgB,MAAM,EAAI;AAC3C,oBAAI,CAACC,YAAL,GAAoBD,MAAM,CAACE,EAA3B;AACA,oBAAI,CAACC,cAAL,GAAsB,MAAI,CAACT,WAAL,CAAiBU,KAAjB,CAAuB;AAC3C/C,oBAAI,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWgD,QAAZ,CAAL;AADqC,eAAvB,CAAtB;;AAGA,kBAAI,MAAI,CAACJ,YAAT,EAAuB;AACrB,sBAAI,CAACK,mBAAL;;AACA,sBAAI,CAACtD,aAAL,CAAmBC,SAAnB,CAA6BsD,IAA7B,CAAkC,2DAAY5C,IAA9C;AACD,eAHD,MAGO,MAAI,CAACX,aAAL,CAAmBC,SAAnB,CAA6BsD,IAA7B,CAAkC,2DAAYC,MAA9C;AACR,aATD;AAUD;;;iBAED,+BAAsB;AAAA;;AACpB,iBAAKzB,YAAL,GAAoB,KAAKY,IAAL,CAAUW,mBAAV,CAA8B,KAAKL,YAAnC,EACjBjB,SADiB,CACP,UAACC,GAAD,EAAS;AAClB,kBAAIwB,IAAI,GAAGxB,GAAG,CAACyB,UAAf;AACA,oBAAI,CAACP,cAAL,GAAsB,MAAI,CAACT,WAAL,CAAiBU,KAAjB,CAAuB;AAC3C/C,oBAAI,EAAE,CAACoD,IAAI,CAACpD,IAAN,EAAY,CAAC,0DAAWgD,QAAZ,CAAZ;AADqC,eAAvB,CAAtB;AAGD,aANiB,CAApB;AAOD;;;iBAED,oBAAW;AACT,iBAAKM,SAAL,GAAiB,IAAjB;AACA,gBAAI,KAAKR,cAAL,CAAoBS,OAApB,IAA+B,CAAC,KAAKC,IAAzC,EAA+C,OAA/C,KACK;AACH,kBAAI,CAAC,KAAKZ,YAAV,EACE,KAAKa,QAAL,GADF,KAEK,KAAKC,MAAL;AACN;AACF;;;iBAED,oBAAW;AAAA;;AACT,gBAAIL,UAAU,GAAG,IAAI,4DAAJ,EAAjB;AACAA,sBAAU,CAACrD,IAAX,GAAkB,KAAK8C,cAAL,CAAoBa,KAApB,CAA0B3D,IAA5C;AACAqD,sBAAU,CAACO,WAAX,GAAyB,KAAKJ,IAA9B;AACA,iBAAK9B,YAAL,GAAoB,KAAKY,IAAL,CAAUuB,kBAAV,CAA6BR,UAA7B,EACjB1B,SADiB,CACP,UAACC,GAAD,EAAS;AAClB,oBAAI,CAAC0B,SAAL,GAAiB,KAAjB;AACD,aAHiB,CAApB;AAID;;;iBAED,kBAAS;AAAA;;AACP,gBAAID,UAAU,GAAG,IAAI,4DAAJ,EAAjB;AACAA,sBAAU,CAACrD,IAAX,GAAkB,KAAK8C,cAAL,CAAoBa,KAApB,CAA0B3D,IAA5C;AACAqD,sBAAU,CAACO,WAAX,GAAyB,KAAKJ,IAA9B;AACAH,sBAAU,CAACS,GAAX,GAAiB,KAAKlB,YAAtB;AACA,iBAAKlB,YAAL,GAAoB,KAAKY,IAAL,CAAUyB,kBAAV,CAA6BV,UAA7B,EACjB1B,SADiB,CACP,UAACC,GAAD,EAAS;AAClB,oBAAI,CAAC0B,SAAL,GAAiB,KAAjB;AACD,aAHiB,CAApB;AAID;;;iBACD,iBAAQE,IAAR,EAAmB;AACjB,iBAAKA,IAAL,GAAYA,IAAZ;AACD,W,CAED;;;;eACA,eAAQ;AAAE,mBAAO,KAAKV,cAAL,CAAoBkB,QAA3B;AAAsC;;;iBAEhD,4BAAmB;AACjB,gBAAIC,IAAI,GAAG,KAAKzB,KAAL,CAAW0B,gBAAX,CAA4BD,IAA5B,CAAiCE,iBAAjC,EAAX;;AACA,iBAAK1B,OAAL,CAAa2B,aAAb,CAA2BH,IAAI,GAAG,GAAP,GAAa,8DAAevB,UAAvD;AACD;;;iBAED,uBAAc;AACZ,iBAAKhB,YAAL,CAAkBM,WAAlB;AACD;;;;;;;yBAlFUI,yB,EAAyB,2H,EAAA,oJ,EAAA,+H,EAAA,kK,EAAA,uH;AAAA,O;;;cAAzBA,yB;AAAyB,+C;AAAA,iB;AAAA,e;AAAA,4a;AAAA;AAAA;ACdtC;;AACI;;AACJ;;AAEA;;AACI;;AAAmC;AAAA,qBAAY,IAAAiC,QAAA,EAAZ;AAAsB,aAAtB;;AAC/B;;AACI;;AAAW;;AAAI;;AACf;;AAEJ;;AACA;;AACI;;AAAW;;AAAI;;AACf;;AACI;;AACA;;AAAiB;AAAA,qBAAU,IAAAC,OAAA,QAAV;AAAyB,aAAzB;;AAA2B;;AAC5C;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAAiC;AAAA,qBAAW,IAAAC,gBAAA,EAAX;AAA6B,aAA7B;;AAA+B;;AAAM;;AAC1E;;AACA;;AACI;;AAAa;;AAAoC;;AACrD;;AACJ;;AACJ;;AACJ;;;;AA3ByB;;AAAA;;AAIf;;AAAA;;AAIM;;AAAA;;AAKI;;AAAA;;AAEmB;;AAAA;;AAKX;;AAAA;;AAGC;;AAAA;;;;;;;;;wEDVhBnC,yB,EAAyB;gBALrC,uDAKqC;iBAL3B;AACTH,oBAAQ,EAAE,wBADD;AAETC,uBAAW,EAAE,qCAFJ;AAGTC,qBAAS,EAAE,CAAC,oCAAD;AAHF,W;AAK2B,U","file":"modules-lessonplan-lessonplan-module-es5.80747337f8cafe07c51f.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ReactiveFormsModule, FormsModule } from \"@angular/forms\";\n\n// comlists\nimport { LessonPlanCreateComponent } from './lesson-plan-create/lesson-plan-create.component';\nimport { LessonPlanListsComponent } from './lesson-plan-lists/lesson-plan-lists.component';\n\n// internal Modules\nimport { BasicComponentsModule } from \"@basic-components/basic-components.module\";\nimport { Role } from \"@enum/app_enum\";\nimport { AuthGuardService } from \"@core/guards/auth-guard.service\";\n\nconst comLists=[\n  LessonPlanListsComponent,\n  LessonPlanCreateComponent,\n];\n\nconst routes: Routes = [\n  {\n    path: 'management',\n    component: LessonPlanListsComponent,\n    canActivate: [AuthGuardService],\n    data: { roles: [Role.Admin,Role.Teacher,Role.StudentAffair] }\n  },\n  {\n    path: 'create',\n    component: LessonPlanCreateComponent,\n    canActivate: [AuthGuardService],\n    data: { roles: [Role.Teacher] }\n  },\n  {\n    path: 'management/edit/:id',\n    component: LessonPlanCreateComponent,\n    canActivate: [AuthGuardService],\n    data: { roles: [Role.Teacher] }\n  }\n];\n\n@NgModule({\n  declarations: [comLists],\n  imports: [\n    CommonModule,\n    BasicComponentsModule,\n    RouterModule.forChild(routes),\n    ReactiveFormsModule,\n    FormsModule\n  ],\n  exports:[\n    comLists\n  ]\n})\nexport class LessonplanModule { }\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { TeacherSideMenu, Label, ActionLabel } from \"@enum/app_enum\";\nimport { LessonplanService } from \"@core/services/serviceIndex\";\nimport { Subscription } from 'rxjs';\n@Component({\n  selector: 'app-lesson-plan-lists',\n  templateUrl: './lesson-plan-lists.component.html',\n  styleUrls: ['./lesson-plan-lists.component.css']\n})\nexport class LessonPlanListsComponent implements OnInit,OnDestroy {\n  public routeDirLists = {\n    routeName: [TeacherSideMenu.LessonPlan],\n    routeLink: []\n  };\n  public tableHeader = [Label.name, Label.createDate, Label.lastModified, Label.fileSize, Label.action];\n  public actionBtns = [ActionLabel.edit, ActionLabel.download, ActionLabel.delete];\n  public dataLists: any = {\n  };\n  public objectLabel: any = [\"name\", \"createdDate\", \"updatedDate\", \"fileSize\"];\n\n  public limit: any = 10;\n  public page: any = 1;\n  public totalCount: any;\n  public filter: any = {\n    sortColumn: this.objectLabel[0],\n    sortDirection: \"asc\",\n    index: 0\n  };\n  public actionLinks: any = {\n    editLink: \"teacher/lesson-plans/management/edit\",\n    deleteLink: \"lesson-plans\",\n    idKeyname: \"lessonPlanId\",\n  }\n  public searchData: any;\n  public subscription: Subscription;\n\n  constructor(private _service: LessonplanService) { }\n\n  ngOnInit(): void {\n    this.getLessonList();\n\n  }\n\n  pageChanges(e: any) {\n    console.log(e);\n    this.page = e;\n    this.getLessonList();\n  }\n\n  onsearch(search: string) {\n    console.log(search);\n    this.searchData = search;\n    this.getLessonList();\n  }\n\n  onFilter(filter: any) {\n    this.filter = filter;\n    this.getLessonList();\n  }\n\n  getLessonList() {\n    this.subscription = this._service.getLessonList(this.searchData, this.page, this.limit, this.filter.sortColumn, this.filter.sortDirection)\n      .subscribe((res) => {\n        this.dataLists.data = res.lessonPlans;\n        this.totalCount = res.totalCount;\n        this.dataLists.tableHeader = this.tableHeader;\n        this.dataLists.actionBtns = this.actionBtns;\n        this.dataLists.objectLabel = this.objectLabel;\n        this.dataLists.btnLink = this.actionLinks;\n      })\n  }\n\n  ngOnDestroy(){\n    this.subscription.unsubscribe();\n  }\n}\n","<div class=\"container mt-3\">\n    <!-- <app-spinner-loader></app-spinner-loader> -->\n    <div *ngIf=\"dataLists?.data\">\n        <div class=\"d-flex justify-content-between mt-3\">\n            <app-route-direction [dirList]=\"routeDirLists\"></app-route-direction>\n            <app-search-box (searchEmit)=\"onsearch($event)\"></app-search-box>\n        </div>\n\n        <app-dynamic-table [tableData]=\"dataLists\" (setfilter)=\"onFilter($event)\" [filter]=\"filter\" ></app-dynamic-table>\n        <app-pagination [numberPerPage]=\"limit\" [numberOfPages]=\"page\" [totalCount]=\"totalCount\"\n            (pageChange)=\"pageChanges($event)\"></app-pagination>\n    </div>\n</div>","export class LessonPlan {\n    _id: String;\n    name: String;\n    lesssonPlan: String;\n}","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { LessonplanService } from \"@core/services/lessonplan.service\";\nimport { TeacherSideMenu, ActionLabel, EssentialRoute } from \"@enum/app_enum\";\nimport { LessonPlan } from \"@model/lessonPlan\";\nimport { AuthenticationService } from \"@core/authentication/authentication.service\";\nimport { Subscription } from 'rxjs';\n@Component({\n  selector: 'app-lesson-plan-create',\n  templateUrl: './lesson-plan-create.component.html',\n  styleUrls: ['./lesson-plan-create.component.css']\n})\nexport class LessonPlanCreateComponent implements OnInit, OnDestroy {\n  public routeDirLists: any = {\n    routeName: [TeacherSideMenu.LessonPlan],\n    routeLink: [EssentialRoute.LessonList]\n  };\n  public submitted: boolean;\n  public lessonplanForm: FormGroup;\n  public file: any;\n  public lessonPlanId: any;\n  public subscription: Subscription;\n\n\n  constructor(private formBuilder: FormBuilder, private _ser: LessonplanService,\n    private _activeRoute: ActivatedRoute, private _auth: AuthenticationService, private _router: Router) { }\n\n  ngOnInit(): void {\n    this._activeRoute.params.subscribe(params => {\n      this.lessonPlanId = params.id;\n      this.lessonplanForm = this.formBuilder.group({\n        name: [\"\", [Validators.required]],\n      });\n      if (this.lessonPlanId) {\n        this.getLessonPlanDetail();\n        this.routeDirLists.routeName.push(ActionLabel.edit);\n      } else this.routeDirLists.routeName.push(ActionLabel.create)\n    });\n  }\n\n  getLessonPlanDetail() {\n    this.subscription = this._ser.getLessonPlanDetail(this.lessonPlanId)\n      .subscribe((res) => {\n        let temp = res.lessonPlan;\n        this.lessonplanForm = this.formBuilder.group({\n          name: [temp.name, [Validators.required]],\n        });\n      })\n  }\n\n  onSubmit() {\n    this.submitted = true\n    if (this.lessonplanForm.invalid || !this.file) return;\n    else {\n      if (!this.lessonPlanId)\n        this.onCreate();\n      else this.onEdit();\n    }\n  }\n\n  onCreate() {\n    let lessonPlan = new LessonPlan();\n    lessonPlan.name = this.lessonplanForm.value.name;\n    lessonPlan.lesssonPlan = this.file;\n    this.subscription = this._ser.onCreateLessonPlan(lessonPlan)\n      .subscribe((res) => {\n        this.submitted = false;\n      });\n  }\n\n  onEdit() {\n    let lessonPlan = new LessonPlan();\n    lessonPlan.name = this.lessonplanForm.value.name;\n    lessonPlan.lesssonPlan = this.file;\n    lessonPlan._id = this.lessonPlanId;\n    this.subscription = this._ser.onUpdateLessonPlan(lessonPlan)\n      .subscribe((res) => {\n        this.submitted = false;\n      });\n  }\n  getfile(file: any) {\n    this.file = file;\n  }\n\n  // convenience getter for easy access to form fields\n  get f() { return this.lessonplanForm.controls; }\n\n  cancelLessonPlan() {\n    let role = this._auth.currentUserValue.role.toLocaleLowerCase();\n    this._router.navigateByUrl(role + \"/\" + EssentialRoute.LessonList);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n}\n","<div class=\"d-flex mt-3\">\n    <app-route-direction [dirList]=\"routeDirLists\"></app-route-direction>\n</div>\n\n<div class=\"col-md-8 mx-auto\">\n    <form [formGroup]=\"lessonplanForm\" (ngSubmit)=\"onSubmit()\">\n        <div class=\"form-group\">\n            <app-label>Name</app-label>\n            <input type=\"text\" formControlName=\"name\" class=\"form-control input-style\" placeholder=\"Enter name\"\n                [ngClass]=\"{ 'is-invalid': submitted && f.name.errors }\" />\n        </div>\n        <div class=\"form-group\">\n            <app-label>File</app-label>\n            <div>\n                <p  *ngIf=\"file\" class=\"warning-txt\">{{file.name}}</p>\n                <app-file-upload (onFile)=\"getfile($event)\"></app-file-upload>\n                <p class=\"warning-txt\" *ngIf=\"submitted && !file\">*You need to upload file.</p>\n            </div>\n        </div>\n        <div class=\"d-flex justify-content-end\">\n            <div class=\"d-flex m-2 flex-column\">\n                <cancel-btn [btnSize]=\"'btn-lg'\" (onClick)=\"cancelLessonPlan()\">Cancel</cancel-btn>\n            </div>\n            <div class=\"d-flex m-2 flex-column\">\n                <primary-btn>{{lessonPlanId ? \"Edit\" : \"Create\"}}</primary-btn>\n            </div>\n        </div>\n    </form>\n</div>"]}