{"version":3,"sources":["webpack:///src/app/modules/users/installment-month-list/installment-month-list.component.ts","webpack:///src/app/modules/users/installment-month-list/installment-month-list.component.html","webpack:///src/app/modules/users/user-create/user-create.component.ts","webpack:///src/app/modules/users/user-create/user-create.component.html","webpack:///src/app/modules/users/users.module.ts","webpack:///src/app/modules/users/student-create/student-create.component.ts","webpack:///src/app/modules/users/student-create/student-create.component.html","webpack:///node_modules/croppie/croppie.js","webpack:///src/app/shared/models/user.ts","webpack:///src/app/modules/users/user-lists/user-lists.component.ts","webpack:///src/app/modules/users/user-lists/user-lists.component.html","webpack:///src/app/shared/basic-components/student-view/student-view.component.ts","webpack:///src/app/shared/basic-components/student-view/student-view.component.html"],"names":["InstallmentMonthListComponent","monthsList","One","Three","Six","selectInstallmentMonths","mon","emit","selector","templateUrl","styleUrls","months","UserCreateComponent","formBuilder","_userService","_router","_activeRoute","_auth","isCrop","blankCrop","imgDemoSlider","validProfile","submitted","userRole","Admin","Parent","Teacher","StudentAffair","position","relationship","Mother","Father","Guardian","routeDirLists","routeName","User","Create","routeLink","isStudentCreate","studentList","isParent","userForm","group","username","required","email","role","gender","password","minLength","confirmPassword","dateOfBirth","startDate","education","phoneNumber","emergencyContact","address","validator","MustMatch","checkAction","params","subscribe","userId","routeRole","Student","toLowerCase","getUserDetail","subscription","res","user","currentRole","changeRole","uploadImg","image","students","console","log","getStudentIdString","map","d","controls","setErrors","value","isChangePassword","invalid","onUpdate","onCreate","getImg","document","getElementById","img","undefined","getAttribute","uploadCrop","ulFile","dataURItoBlob","file","temp","stud","_id","join","finalData","getFinalData","createUser","data","goBack","error","updateUser","val","std","get","disable","push","Principal","VicePrincipal","HOD","Coordinator","BOD","Secretary","HomeroomTeacher","AssitantTeacher","SubjectTeacher","Receptionist","OfficeStaff","Librarain","Accountant","e","pos","setValue","target","onlySelf","rs","$event","Image","$","css","remove","input","files","destroy","reader","FileReader","viewport","width","height","type","boundary","enableExif","$uploadCrop","onload","addClass","bind","url","result","then","readAsDataURL","self","setTimeout","attr","cropper","BlobUrl","circle","size","quality","resp","append","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","currentUserValue","navigateByUrl","replace","unsubscribe","controlName","matchingControlName","formGroup","control","matchingControl","errors","mustMatch","routes","path","component","canActivate","roles","comLists","UsersModule","forChild","declarations","imports","exports","StudentCreateComponent","_yearService","_supportService","isImgLoad","yearList","years","Son","Daughter","Niece","Nephew","Grandchild","addStudent","displayStudentForm","studentForm","year","paidAmount","description","studentId","api1","getYearList","api2","Edit","results","paymentInfo","yearId","amount","student","payDate","Date","getFinaldata","createStudent","response","updateStudent","onSubmit","root","factory","Promise","a","b","apply","arguments","c","TypeError","_state","_value","_deferreds","f","k","onFulfilled","onRejected","resolve","reject","g","call","h","j","setImmediate","l","Array","isArray","Object","prototype","toString","all","slice","constructor","race","_setImmediateFn","module","window","CustomEvent","event","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","HTMLCanvasElement","toBlob","defineProperty","callback","binStr","toDataURL","len","arr","cssPrefixes","emptyStyles","createElement","style","EXIF_NORM","EXIF_FLIP","CSS_TRANS_ORG","CSS_TRANSFORM","CSS_USERSELECT","vendorPrefix","prop","capProp","toUpperCase","getExifOffset","ornt","rotate","indexOf","index","offset","deepExtend","destination","source","property","clone","object","debounce","func","wait","immediate","timeout","context","args","later","callNow","clearTimeout","dispatchChange","element","initEvent","dispatchEvent","fireEvent","el","styles","tmp","classList","add","className","removeClass","setAttributes","attrs","key","setAttribute","num","v","parseInt","loadImage","src","doExif","opacity","_resolve","removeAttribute","match","EXIF","getData","onerror","ev","naturalImageDimensions","w","naturalWidth","naturalHeight","orient","getExifOrientation","x","TRANSLATE_OPTS","suffix","Transform","y","scale","parseFloat","parse","fromMatrix","fromString","vals","substring","values","translate","Croppie","globals","TransformOrigin","exifdata","Orientation","drawCanvas","canvas","orientation","ctx","getContext","save","Math","PI","drawImage","restore","_create","contClass","customViewportClass","options","overlay","bw","bh","useCanvas","enableOrientation","_hasExif","elements","preview","isNaN","appendChild","customClass","_initDraggable","enableZoom","_initializeZoom","enableResize","_initializeResize","wrap","isDragging","direction","originalX","originalY","minSize","maxWidth","maxHeight","vr","hr","resizeControls","mouseDown","button","preventDefault","overlayRect","getBoundingClientRect","pageX","pageY","currentTarget","touches","addEventListener","mouseMove","mouseUp","body","deltaX","deltaY","newHeight","newWidth","_updateOverlay","_updateZoomLimits","_updateCenterPoint","_triggerUpdate","removeEventListener","_setZoomerVal","z","zoomer","fix","max","min","zoomerWrap","step","display","showZoomer","_currentZoom","change","_onZoom","origin","viewportRect","transform","scroll","delta","targetZoom","mouseWheelZoom","ctrlKey","wheelDelta","ui","vpRect","applyCss","transCss","enforceBoundary","boundaries","_getVirtualBoundaries","transBoundaries","oBoundaries","maxX","minX","maxY","minY","_debouncedOverlay","vpWidth","vpHeight","centerFromBoundaryX","clientWidth","centerFromBoundaryY","clientHeight","imgRect","curImgWidth","curImgHeight","halfWidth","halfHeight","originMinX","originMaxX","originMinY","originMaxY","vpData","pc","top","left","center","adj","cx","cy","tx","ty","newCss","originalDistance","assignTransformCoordinates","bottom","right","toggleGrabState","keyDown","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","shiftKey","keyCode","zoom","setZoom","enableKeyMovement","movement","parseKeyDown","keyMove","touch1","touch2","dist","sqrt","boundRect","imgData","_isVisible","update","Prototype","trigger","offsetHeight","offsetWidth","_updatePropertiesFromImage","initialZoom","cssReset","transformReset","originReset","isVisible","bound","_originalImageWidth","_originalImageHeight","points","_bindPoints","_centerImage","initial","minZoom","maxZoom","defaultInitialZoom","boundaryData","minW","minH","boundZoom","pointsWidth","vpOffset","originTop","originLeft","transformTop","transformLeft","imgDim","vpDim","boundDim","vpLeft","vpTop","_transferImageToCanvas","customOrientation","clearRect","_getCanvas","startX","startY","canvasWidth","outputWidth","canvasHeight","outputHeight","backgroundColor","fillStyle","fillRect","sx","sy","sWidth","sHeight","dx","dy","dWidth","dHeight","abs","globalCompositeOperation","beginPath","arc","closePath","fill","_getHtmlResult","div","_getBase64Result","format","_getBlobResult","blob","_replaceImage","parentNode","forEach","replaceChild","_bind","cb","hasExif","natDim","rect","aspectRatio","imgAspectRatio","x0","y0","x1","y1","relative","p","decimalPoints","toFixed","_get","widthDiff","heightDiff","x2","y2","Infinity","Number","NEGATIVE_INFINITY","RESULT_DEFAULTS","RESULT_FORMATS","_result","opts","resultType","ratio","prom","_refresh","_rotate","deg","oldHeight","oldWidth","_destroy","removeChild","jQuery","fn","croppie","ot","singleInst","each","method","isFunction","removeData","Error","defaults","tagName","origImage","replacementDiv","bindOpts","orientationControls","enabled","leftClass","rightClass","refresh","UserListsComponent","tableHeader","createDate","name","phonenumber","action","actionBtns","edit","objectLabel","filter","actionLinks","editLink","deleteLink","idKeyname","limit","page","isAsc","userLists","currentUserRole","sortColumn","sortDirection","selectedRouteRole","charAt","toLocaleLowerCase","getUserLists","searchData","users","btnLink","totalCount","StudentViewComponent"],"mappings":"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","file":"modules-users-users-module-es5.bb12d7fdc34fca621c2f.js","sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { PaymentInstallmentMonths } from \"@enum/app_enum\";\n\n@Component({\n  selector: 'app-installment-month-list',\n  templateUrl: './installment-month-list.component.html',\n  styleUrls: ['./installment-month-list.component.css']\n})\nexport class InstallmentMonthListComponent implements OnInit {\n\n  public monthsList = [ PaymentInstallmentMonths.One, PaymentInstallmentMonths.Three, PaymentInstallmentMonths.Six ]\n  //public selectedMonth = PaymentInstallmentMonths.One\n  @Input() months \n  @Output() selectInstallmentMonths: any = new EventEmitter<any>()\n\n  constructor() { }\n\n  ngOnInit() {}\n  \n  select(mon){\n    //this.selectedMonth = month\n    this.selectInstallmentMonths.emit(mon)\n  }\n\n}\n","<div>\n  <div *ngFor=\"let mon of monthsList\" (click)=\"select(mon)\" class=\"month-btn btn {{ months == mon ? 'selected' : 'unselect' }}\">\n    {{mon}} <br> Months\n  </div>  \n</div>\n\n\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\n\nimport { Role, Relationship, AdminSideMenu, CommonExpands, AdminPosition, TeacherPosition, StaffPosition, } from \"@enum/app_enum\";\nimport { User } from \"@model/user\";\nimport { UserService } from \"@core/services/serviceIndex\";\nimport { AuthenticationService } from \"@core/authentication/authentication.service\";\nimport Croppie from \"croppie\";\nimport { Subscription } from 'rxjs';\n\n// import * as $ from \"jquery\";\ndeclare var $: any;\n@Component({\n  selector: 'app-user-create',\n  templateUrl: './user-create.component.html',\n  styleUrls: ['./user-create.component.css']\n})\nexport class UserCreateComponent implements OnInit, OnDestroy {\n  public isCrop: boolean = false;\n  blankCrop: boolean = false;\n  imgDemoSlider: boolean = false;\n  validProfile: boolean = false;\n  public input: any;\n  public uploadCrop: any;\n  public uploadImg: any;\n  public userForm: FormGroup\n  public submitted = false\n  public userRole = [Role.Admin, Role.Parent, Role.Teacher, Role.StudentAffair]\n  public position = [];\n  public relationship = [Relationship.Mother, Relationship.Father,Relationship.Guardian]\n  public routeDirLists: any = {\n    routeName: [AdminSideMenu.User, CommonExpands.Create],\n    routeLink: [\"users/admin-management/admin\"]\n  }\n  public isStudentCreate: boolean = false\n  public studentList: any = []\n  public userId: any;\n  public isParent: boolean = false;\n  public currentRole: any;\n  public isChangePassword: boolean;\n  public routeRole: any;\n  public subscription: Subscription;\n\n\n  constructor(private formBuilder: FormBuilder, private _userService: UserService,\n    private _router: Router, private _activeRoute: ActivatedRoute, private _auth: AuthenticationService) { }\n\n  ngOnInit(): void {\n    this.userForm = this.formBuilder.group({\n      username: [\"\", [Validators.required]],\n      email: [\"\", [Validators.required, Validators.email]],\n      role: [\"\", [Validators.required]],\n      gender: [\"male\", [Validators.required]],\n      password: [\"\", [Validators.required, Validators.minLength(5)]],\n      confirmPassword: [\"\", Validators.required],\n      dateOfBirth: [\"\", [Validators.required]],\n      startDate: [\"\", [Validators.required]],\n      position: [\"\", [Validators.required]],\n      education: [\"\", [Validators.required]],\n      phoneNumber: [\"\", [Validators.required]],\n      emergencyContact: [\"\", []],\n      address: [\"\", [Validators.required]],\n      relationship: [\"\", [Validators.required]],\n    },\n      {\n        validator: MustMatch(\"password\", \"confirmPassword\"),\n      }\n    );\n    this.checkAction();\n  }\n\n  checkAction() {\n    this._activeRoute.params.subscribe(params => {\n      this.userId = params.userId;\n      this.routeRole = params.role;\n      if (params.role == Role.Student.toLowerCase()) this.isStudentCreate = true;\n      if (this.userId) {\n        this.getUserDetail();\n      }\n    });\n  }\n\n  getUserDetail() {\n    this.subscription = this._userService.getUserDetail(this.userId)\n      .subscribe((res) => {\n        let user = res.user;\n        this.currentRole = user.role;\n        this.changeRole(user.role);\n        this.uploadImg = user.image;\n        this.studentList = user.students ? user.students : [];\n        this.userForm = this.formBuilder.group({\n          username: [user.username, [Validators.required]],\n          email: [user.email, [Validators.required, Validators.email]],\n          role: [user.role, [Validators.required]],\n          gender: [user.gender, [Validators.required]],\n          password: [\"\", [Validators.minLength(5)]],\n          confirmPassword: [\"\"],\n          dateOfBirth: [user.dateOfBirth, [Validators.required]],\n          startDate: [user.startDate, [Validators.required]],\n          position: [user.position, [Validators.required]],\n          education: [user.education, [Validators.required]],\n          phoneNumber: [user.phoneNumber, [Validators.required]],\n          emergencyContact: [user.emergencyContact, [Validators.required]],\n          address: [user.address, [Validators.required]],\n          relationship: [user.relationship, [Validators.required]],\n        },\n          {\n            validator: MustMatch(\"password\", \"confirmPassword\"),\n          }\n        );\n      });\n\n  }\n\n  onSubmit() {\n    console.log(this.getStudentIdString());\n    if (this.currentRole == Role.Parent) {\n      ['startDate', 'position', 'education', 'emergencyContact'].map(d => this.userForm.controls[d].setErrors(null))\n    } else {\n      this.userForm.controls['relationship'].setErrors(null)\n    }\n    console.log(this.userForm.value)\n    if (this.userId && !this.isChangePassword)\n      this.userForm.controls['password'].setErrors(null);\n    this.submitted = true\n    if (this.userForm.invalid) return;\n    else {\n      if (this.userId) {\n        this.onUpdate();\n      } else {\n        this.onCreate();\n      }\n    }\n  }\n\n  getFinalData() {\n    let user = new User();\n    user.username = this.userForm.value.username;\n    user.email = this.userForm.value.email;\n    user.role = this.currentRole;\n    user.gender = this.userForm.value.gender;\n    user.dateOfBirth = this.userForm.value.dateOfBirth;\n    user.startDate = this.userForm.value.startDate;\n    user.position = this.userForm.value.position;\n    user.education = this.userForm.value.education;\n    user.phoneNumber = this.userForm.value.phoneNumber;\n    user.emergencyContact = this.userForm.value.emergencyContact;\n    user.address = this.userForm.value.address;\n    if (this.userId && this.isChangePassword) user.password = this.userForm.value.password;\n    else user.password = this.userForm.value.password;\n    user.relationship = this.userForm.value.relationship;\n    if (this.currentRole == Role.Parent) {\n      user.students = this.getStudentIdString();\n    }\n    let getImg = document.getElementById(\"blobUrl\");\n    let img;\n    img =\n      getImg != undefined\n        ? document.getElementById(\"blobUrl\").getAttribute(\"src\")\n        : (img = this.uploadCrop);\n    if (img != undefined) {\n      let ulFile = this.dataURItoBlob(img);\n      console.log(ulFile)\n      user.file = ulFile;\n    }\n    return user;\n  }\n\n  getStudentIdString() {\n    let temp = this.studentList.map((stud) => {\n      return stud._id;\n    });\n    console.log(temp);\n    return temp.join(',');\n  }\n  onCreate() {\n    let finalData = this.getFinalData();\n    console.log(finalData)\n    this.subscription = this._userService.createUser(finalData)\n      .subscribe(\n        data => {\n          this.goBack();\n\n        },\n        error => {\n          console.log(error);\n          // this.loading = false;\n        });\n  }\n\n  onUpdate() {\n    let finalData = this.getFinalData();\n    finalData._id = this.userId;\n    this.subscription = this._userService.updateUser(finalData)\n      .subscribe(\n        () => {\n          this.goBack();\n          //this.userForm.reset()\n        },\n        error => {\n          console.log(error);\n          // this.loading = false;\n        });\n  }\n\n  displayStudentForm(val: boolean) {\n    this.isStudentCreate = val;\n  }\n\n  addStudent(std = null) {\n    this.userForm.get('role').disable();\n    this.studentList.push(std);\n    this.isStudentCreate = false;\n  }\n\n  get f() { return this.userForm.controls }\n\n  changeRole(role) {\n    this.currentRole = role;\n    if (this.currentRole == Role.Admin)\n      this.position = [AdminPosition.Principal, AdminPosition.VicePrincipal, AdminPosition.HOD, AdminPosition.Coordinator, AdminPosition.BOD, AdminPosition.Secretary];\n    else if (this.currentRole == Role.Teacher)\n      this.position = [TeacherPosition.HomeroomTeacher,TeacherPosition.AssitantTeacher,TeacherPosition.SubjectTeacher];\n      else if (this.currentRole == Role.StudentAffair)\n      this.position = [StaffPosition.Receptionist,StaffPosition.OfficeStaff,StaffPosition.Librarain,StaffPosition.Accountant,];\n\n  }\n\n\n\n  changePosition(e) {\n    this.pos.setValue(e.target.value, {\n      onlySelf: true\n    })\n  }\n\n  get pos() {\n    return this.userForm.get('position');\n  }\n\n\n\n  changeRelationship(e) {\n    this.rs.setValue(e.target.value, {\n      onlySelf: true\n    })\n  }\n\n  get rs() {\n    return this.userForm.get('relationship');\n  }\n\n  // isAdminOrTeacherOrStdAffairRole(){\n  //   return [Role.Admin, Role.Teacher, Role.StudentAffair].includes(this.selectedRole)\n  // }\n\n\n  uploadCropImg($event: any) {\n    var image: any = new Image();\n    this.blankCrop = true;\n    $(\".frame-upload\").css(\"display\", \"block\");\n    this.imgDemoSlider = true;\n    $(\"#upload-demo img:first\").remove();\n    this.input = $event.target.files[0];\n    // if (this.input.size <= 477732 && this.input) {\n    if (this.input && this.uploadCrop) {\n      this.uploadCrop.destroy();\n    }\n    var reader: FileReader = new FileReader();\n    this.uploadCrop = new Croppie(document.getElementById(\"upload-demo\"), {\n      viewport: {\n        width: 120,\n        height: 120,\n        type: \"circle\",\n      },\n      boundary: {\n        width: 120,\n        height: 120,\n      },\n      enableExif: true,\n    });\n\n    var $uploadCrop = this.uploadCrop;\n    reader.onload = function (e: any) {\n      $(\".upload-demo\").addClass(\"ready\");\n      $uploadCrop\n        .bind({\n          url: e.target.result,\n        })\n        .then(function (e: any) { });\n    };\n    reader.readAsDataURL($event.target.files[0]);\n    // } else {\n    //   console.log('file size is too large');\n    //   // this.toastr.error('file size is too large');\n    //   this.validProfile = false;\n    //   this.imgDemoSlider = false;\n    //   $('.frame-upload').css('display', 'none');\n    // }\n  }\n\n  cropResult() {\n    this.validProfile = true;\n    this.isCrop = true;\n    let self = this;\n\n\n    this.imgDemoSlider = false;\n    setTimeout(function () {\n      $(\".circular-profile img:last-child\").attr(\"id\", \"blobUrl\");\n      $(\".frame-upload\").css(\"display\", \"none\");\n      this.blankCrop = false;\n    }, 200);\n\n    var cropper = this.uploadCrop;\n    var BlobUrl = this.dataURItoBlob;\n    this.uploadCrop\n      .result({\n        circle: false,\n        type: \"canvas\",\n        size: {\n          width: 120,\n          height: 120,\n        },\n        quality: 1,\n      })\n      .then(function (resp: any) {\n        if (resp) {\n          setTimeout(function () {\n            $(\".circular-profile i\").remove();\n            $(\".circular-profile img\").remove();\n\n            $(\".circular-profile\").append(\n              '<img src=\"' + resp + '\" width=\"100%\" />'\n            );\n          }, 100);\n        }\n      });\n  }\n\n  dataURItoBlob(dataURI: any) {\n    var byteString = atob(dataURI.split(',')[1]);\n    var mimeString = dataURI\n      .split(',')[0]\n      .split(':')[1]\n      .split(';')[0];\n    var ab = new ArrayBuffer(byteString.length);\n    var ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], { type: mimeString });\n  }\n\n  backToUpload() {\n    // this.hideMenu = true;\n    this.validProfile = false;\n    this.imgDemoSlider = false;\n    $(\".frame-upload\").css(\"display\", \"none\");\n  }\n\n\n\n  goBack() {\n    let userRole = this._auth.currentUserValue.role.toLowerCase();\n    console.log(this.currentRole)\n    if (this.currentRole)\n      this._router.navigateByUrl(userRole + \"/users/\" + this.currentRole.replace(/\\s/g, '').toLowerCase() + \"-management/\" + this.currentRole);\n    else this._router.navigateByUrl(userRole + \"/users/\" + this.routeRole.replace(/\\s/g, '').toLowerCase() + \"-management/\" + this.routeRole);\n  }\n\n  showForget() {\n    this.isChangePassword = true;\n  }\n\n  ngOnDestroy() {\n    if(this.subscription)\n    this.subscription.unsubscribe();\n  }\n}\n\nfunction MustMatch(controlName: string, matchingControlName: string) {\n  return (formGroup: FormGroup) => {\n    const control = formGroup.controls[controlName];\n    const matchingControl = formGroup.controls[matchingControlName];\n\n    if (matchingControl.errors && !matchingControl.errors.mustMatch) {\n      // return if another validator has already found an error on the matchingControl\n      return;\n    }\n\n    // set error on matchingControl if validation fails\n    if (control.value !== matchingControl.value) {\n      matchingControl.setErrors({ mustMatch: true });\n    } else {\n      matchingControl.setErrors(null);\n    }\n  };\n\n}\n","<div *ngIf=\"currentRole=='Student' || isStudentCreate\" class=\"main-content\">\n    <app-student-create (addStudent)=\"addStudent($event)\" (displayStudentForm)=\"displayStudentForm($event)\">\n    </app-student-create>\n</div>\n<div *ngIf=\"currentRole!='student'\" class=\"h-100\">\n    <div class=\"d-flex justify-content-between align-items-center mt-3\">\n        <app-route-direction [dirList]=\"routeDirLists\"></app-route-direction>\n    </div>\n    <div class=\"main-content\">\n        <form [formGroup]=\"userForm\" class=\"col-md-8 mx-auto\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-md-6 form-group p-0\">\n                        <div class=\"col-md-12 form-group\">\n                            <app-label>Name</app-label>\n                            <input type=\"text\" formControlName=\"username\" class=\"form-control input-style\"\n                                placeholder=\"Enter your name\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.username.errors }\" />\n                        </div>\n\n                        <div class=\"col-md-12 form-group\">\n                            <app-label>Email</app-label>\n                            <input type=\"text\" formControlName=\"email\" class=\"form-control input-style\"\n                                placeholder=\"Enter your email\" [ngClass]=\"{ 'is-invalid': submitted && f.email.errors }\"\n                                appEmailphoneValidator />\n                        </div>\n                    </div>\n                    <div class=\"col-md-6 form-group\">\n                        <label for=\"upload\" class=\"d-flex justify-content-center w-100\">\n                            <div class=\"profile-box label-txt\" *ngIf=\"!imgDemoSlider\">\n                                <div class=\"circular-wrap\">\n                                    <div class=\"circular-profile create\" *ngIf=\"!userId\">\n                                    </div>\n                                    <div class=\"circular-profile\" *ngIf=\"userId\">\n                                        <app-profile-image-view [profileImg]=\"uploadImg\"></app-profile-image-view>\n                                    </div>\n                                </div>\n                                <!-- </ng-template> -->\n                                <div class=\"demo-wrap upload-wrapper\">\n                                    <div class=\"container\">\n                                        <div class=\"grid\">\n                                            <div class=\"col-1-2\">\n                                                <div class=\"actions\">\n                                                    <a class=\"btn file-btn\">\n                                                        <input type=\"file\" class=\"upload-jpg form-control\" id=\"upload\"\n                                                            #cropper (change)=\"uploadCropImg($event)\"\n                                                            value=\"Choose a file\" accept=\"image/*\"\n                                                            style=\"display: none;\" />\n                                                    </a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- <div class=\"bg-b100 text-0 medium-bold h4-m text-upload\">\n                                            Upload photo\n                                        </div> -->\n                            </div>\n\n                            <div class=\"profile-box label-txt hidebox\" [ngClass]=\"{ showbox: imgDemoSlider == true }\">\n                                <div class=\"frame-upload\">\n                                    <div class=\"upload-demo-wrap\">\n                                        <div id=\"upload-demo\"></div>\n                                    </div>\n                                    <div class=\"d-flex img-footer\">\n                                        <button *ngIf=\"blankCrop\" class=\"btn upload-result text-d200 demi-bold w-50\"\n                                            (click)=\"backToUpload()\">\n                                            Cancel\n                                        </button>\n\n                                        <button *ngIf=\"blankCrop\" class=\"btn upload-result text-b100 demi-bold w-50\"\n                                            id=\"sizeDisable\" (click)=\"cropResult()\" [value]=\"blankCrop\">\n                                            Crop\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </label>\n                    </div>\n                </div>\n                <div class=\"row\" *ngIf=\"!userId || isChangePassword\">\n                    <div class=\"col-md-6 form-group\">\n                        <app-label>Password</app-label>\n                        <input type=\"password\" formControlName=\"password\" class=\"form-control input-style\"\n                            placeholder=\"Enter your password\"\n                            [ngClass]=\"{ 'is-invalid': submitted && f.password.errors }\" />\n                    </div>\n                    <div class=\"col-md-6 form-group\">\n                        <app-label>Confirm Password</app-label>\n                        <input type=\"password\" formControlName=\"confirmPassword\" class=\"form-control input-style\"\n                            placeholder=\"Enter your confirm password\"\n                            [ngClass]=\"{ 'is-invalid': submitted && f.confirmPassword.errors }\" />\n                    </div>\n                </div>\n                <button class=\"btn btn-pwd\" (click)=\"isChangePassword=true\" *ngIf=\"!isChangePassword && userId\">Change\n                    Password</button>\n                <div class=\"row\">\n                    <div class=\"col-md-6 form-group\" *ngIf=\"!userId\">\n                        <app-label>User Role</app-label>\n                        <select formControlName=\"role\" class=\"form-control selected-box\" (change)=\"changeRole(f.role.value)\"\n                            [ngClass]=\"{ 'is-invalid': submitted && f.role.errors }\">\n                            <option value=\"\" disabled selected>Select Role</option>\n                            <option *ngFor=\"let role of userRole\" [ngValue]=\"role\">{{role}}</option>\n                        </select>\n                    </div>\n\n                    <div class=\"col-md-6 form-group\">\n                        <app-label>Gender</app-label>\n                        <div class=\"d-flex\">\n                            <div class=\"mr-3\">\n                                <label class=\"radio-container\">\n                                    <div> Male</div>\n                                    <input id=\"male\" type=\"radio\" value=\"male\" name=\"gender\" formControlName=\"gender\"\n                                        class=\"input-radio\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </div>\n                            <div class=\"mr-3\">\n                                <label class=\"radio-container\">\n                                    <div>Female</div>\n                                    <input id=\"female\" type=\"radio\" value=\"female\" name=\"gender\"\n                                        formControlName=\"gender\" class=\"input-radio\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <!-- <div *ngIf=\"!selectedRole\" class=\"not-selected-block\"></div> -->\n                <ng-template [ngIf]=\"currentRole != undefined\">\n                    <div class=\"row\" *ngIf=\"currentRole !='Parent'\">\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Date of Birth</app-label>\n                            <input type=\"date\" formControlName=\"dateOfBirth\" class=\"form-control\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.dateOfBirth.errors }\">\n                        </div>\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Start Date (Working)</app-label>\n                            <input type=\"date\" formControlName=\"startDate\" class=\"form-control\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.startDate.errors }\">\n                        </div>\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Position</app-label>\n                            {{f.position.value}}\n                            <select formControlName=\"position\" class=\"form-control selected-box\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.position.errors }\">\n \n                                <option value=\"\" disabled selected>Select Position</option>\n                                <option *ngFor=\"let pos of position\" [ngValue]=\"pos\">{{pos}}</option>\n                            </select>\n                        </div>\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Education</app-label>\n                            <input type=\"text\" formControlName=\"education\" class=\"form-control input-style\"\n                                placeholder=\"Enter education\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.education.errors }\" />\n                        </div>\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Phone Number</app-label>\n                            <input type=\"number\" formControlName=\"phoneNumber\" class=\"form-control input-style\"\n                                placeholder=\"Enter phone number\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.phoneNumber.errors }\"\n                                appEmailphoneValidator />\n                        </div>\n\n\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Emergency Contact</app-label>\n                            <input type=\"number\" formControlName=\"emergencyContact\" class=\"form-control input-style\"\n                                placeholder=\"Enter emergency contact\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.emergencyContact.errors }\"\n                                appEmailphoneValidator />\n                        </div>\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Address</app-label>\n                            <textarea formControlName=\"address\" class=\"form-control\" rows=\"4\"\n                                placeholder=\"Enter address\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.address.errors }\"></textarea>\n                        </div>\n                    </div>\n                    <div class=\"row\" *ngIf=\"currentRole =='Parent'\">\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Date of Birth</app-label>\n                            <input type=\"date\" formControlName=\"dateOfBirth\" class=\"form-control\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.dateOfBirth.errors }\">\n                        </div>\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Phone Number</app-label>\n                            <input type=\"number\" formControlName=\"phoneNumber\" class=\"form-control input-style\"\n                                placeholder=\"Enter phone number\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.phoneNumber.errors }\"\n                                appEmailphoneValidator />\n                        </div>\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Relationship</app-label>\n                            <select formControlName=\"relationship\" class=\"form-control selected-box\"\n                                (change)=\"changeRelationship($event)\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.relationship.errors }\">\n                                <option value=\"\" disabled selected>Select Relationship</option>\n                                <option *ngFor=\"let rs of relationship\" [ngValue]=\"rs\">{{rs}}</option>\n                            </select>\n                        </div>\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Emergency Contact</app-label>\n                            <input type=\"number\" formControlName=\"emergencyContact\" class=\"form-control input-style\"\n                                placeholder=\"Enter emergency contact\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.emergencyContact.errors }\"\n                                appEmailphoneValidator />\n                        </div>\n\n                        <div class=\"col-md-6 form-group\">\n                            <app-label>Address</app-label>\n                            <textarea formControlName=\"address\" class=\"form-control\" rows=\"4\"\n                                placeholder=\"Enter address\"\n                                [ngClass]=\"{ 'is-invalid': submitted && f.address.errors }\"></textarea>\n                        </div>\n                        <div class=\"col-12 form-group\">\n                            <app-label>Student list</app-label>\n                            <div class=\"std-list-section\">\n                                <div class=\"container\">\n                                    <div class=\"std-list\">\n                                        <app-student-view *ngFor=\"let student of studentList\" [student]=\"student\">\n                                        </app-student-view>\n                                    </div>\n                                </div>\n                                <a (click)=\"displayStudentForm(true)\">\n                                    <div class=\"add-std-btn\">\n                                        <img src=\"assets/icons/create.svg\">\n                                        <span>Add Student</span>\n                                    </div>\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </ng-template>\n            </div>\n\n            <div class=\"d-flex justify-content-end\">\n                <div class=\"d-flex m-2 flex-column\">\n                    <cancel-btn [btnSize]=\"'btn-lg'\" (onClick)=\"goBack()\">Cancel</cancel-btn>\n                </div>\n                <div class=\"d-flex m-2 flex-column\">\n                    <primary-btn (click)=\"onSubmit()\">{{userId ? 'Update' : 'Create'}}</primary-btn>\n                </div>\n            </div>\n\n        </form>\n    </div>\n\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ReactiveFormsModule, FormsModule } from \"@angular/forms\";\n\n// com lists\nimport { UserListsComponent } from './user-lists/user-lists.component';\nimport { UserCreateComponent } from './user-create/user-create.component';\nimport { StudentCreateComponent } from './student-create/student-create.component';\nimport { StudentViewComponent } from \"../../shared/basic-components/student-view/student-view.component\";\nimport { InstallmentMonthListComponent } from \"./installment-month-list/installment-month-list.component\";\n// other internal module\nimport { BasicComponentsModule } from \"@basic-components/basic-components.module\";\nimport { AuthGuardService } from '@app/core/guards/auth-guard.service';\nimport { Role } from '@app/enum/app_enum';\n\n\nconst routes: Routes = [\n  {\n    path: 'admin-management/:role',\n    component: UserListsComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin],\n    },\n  },\n  {\n    path: 'teacher-management/:role',\n    component: UserListsComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin,Role.StudentAffair],\n    },\n\n  },\n  {\n    path: 'parent-management/:role',\n    component: UserListsComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin,Role.StudentAffair],\n    },\n\n  },\n  {\n    path: 'student-management/:role',\n    component: UserListsComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin,Role.StudentAffair],\n    },\n\n  },\n  {\n    path: 'studentaffair-management/:role',\n    component: UserListsComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin,Role.StudentAffair],\n    },\n\n  },\n  {\n    path: 'create/:role',\n    component: UserCreateComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin],\n    },\n  },\n  {\n    path: 'admin-management/edit/:role/:userId',\n    component: UserCreateComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin],\n    },\n  },\n  {\n    path: 'teacher-management/edit/:role/:userId',\n    component: UserCreateComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin],\n    },\n  },\n  {\n    path: 'parent-management/edit/:role/:userId',\n    component: UserCreateComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin],\n    },\n  },\n  {\n    path: 'student-management/edit/:role/:studentId',\n    component: UserCreateComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin],\n    },\n  },\n  {\n    path: 'student affair-management/edit/:role/:userId',\n    component: UserCreateComponent,\n    canActivate: [AuthGuardService],\n    data: {\n      roles: [Role.Admin],\n    },\n  },\n];\n\nconst comLists = [\n  UserListsComponent,\n  UserCreateComponent,\n  StudentCreateComponent,\n  StudentViewComponent,\n  InstallmentMonthListComponent\n]\n\n@NgModule({\n  declarations: [comLists],\n  imports: [\n    CommonModule,\n    BasicComponentsModule,\n    RouterModule.forChild(routes),\n    ReactiveFormsModule,\n    FormsModule\n  ],\n  exports: [\n    comLists,\n  ]\n})\nexport class UsersModule { }\n","import { Component, OnInit, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\n\nimport { AdminSideMenu, CommonExpands, StudentRelationship, PaymentInstallmentMonths, Role, Relationship } from \"@enum/app_enum\";\nimport { UserService, YearService, SupportService } from \"@core/services/serviceIndex\";\nimport Croppie from \"croppie\";\nimport { forkJoin } from 'rxjs';\ndeclare var $: any;\n\n@Component({\n  selector: 'app-student-create',\n  templateUrl: './student-create.component.html',\n  styleUrls: ['./student-create.component.css']\n})\nexport class StudentCreateComponent implements OnInit {\n  // @ViewChild(\"cropper\", undefined)\n  // resetCroppers: Function;\n  public isCrop: boolean = false;\n  blankCrop: boolean = false;\n  imgDemoSlider: boolean = false;\n  validProfile: boolean = false;\n  public isImgLoad: boolean = true;\n  public input: any;\n  public uploadCrop: any;\n\n  public studentForm: FormGroup\n  public submitted = false\n  public yearList: any = []\n  public years: any = []\n  public relationship = [StudentRelationship.Son, StudentRelationship.Daughter, StudentRelationship.Niece, StudentRelationship.Nephew, StudentRelationship.Grandchild,];\n  public routeDirLists: any = {\n    routeName: [AdminSideMenu.User, Role.Parent, CommonExpands.Create],\n    routeLink: []\n  }\n  public months = PaymentInstallmentMonths.One\n  public studentId: any;\n  public uploadImg: any;\n  public isChangePassword: boolean = false;\n  @Output() addStudent: any = new EventEmitter<any>()\n  @Output() displayStudentForm: any = new EventEmitter<any>()\n\n  constructor(private formBuilder: FormBuilder, private _userService: UserService,\n    private _yearService: YearService, private _supportService: SupportService,\n    private _activeRoute: ActivatedRoute, private _router: Router) { }\n\n  ngOnInit() {\n    this.studentForm = this.formBuilder.group({\n      username: [\"\", [Validators.required]],\n      email: [\"\", [Validators.required]],\n      dateOfBirth: [\"\", [Validators.required]],\n      gender: [\"male\", [Validators.required]],\n      file: [\"\", []],\n      year: [\"\", [Validators.required]],\n      paidAmount: [\"\", [Validators.required]],\n      relationship: [\"\", [Validators.required]],\n      description: [\"\", [Validators.required]],\n      password: [\"\", [Validators.required, Validators.minLength(5)]],\n      confirmPassword: [\"\", Validators.required],\n    },\n      {\n        validator: MustMatch(\"password\", \"confirmPassword\"),\n      })\n    this.checkAction();\n  }\n\n  checkAction() {\n    this._activeRoute.params.subscribe(params => {\n      this.studentId = params.studentId;\n      if (this.studentId) {\n        let api1 = this._yearService.getYearList();\n        let api2 = this._userService.getUserDetail(this.studentId);\n        this.routeDirLists.routeName = [AdminSideMenu.User, Role.Parent, CommonExpands.Edit]\n        forkJoin([api1, api2]).subscribe(results => {\n          // results[0] is our api1\n          // results[1] is our api2\n          this.yearList = results[0].years;\n          this.getUserDetail(results[1].user);\n        });\n      } else this.getYearList();\n    });\n  }\n\n\n  getUserDetail(user: any) {\n    this.months = user.paymentInfo.months;\n    this.uploadImg = user.image;\n    this.studentForm = this.formBuilder.group({\n      username: [user.username, [Validators.required]],\n      email: [user.email, [Validators.required]],\n      dateOfBirth: [user.dateOfBirth, [Validators.required]],\n      gender: [user.gender, [Validators.required]],\n      year: [user.year.yearId, [Validators.required]],\n      paidAmount: [user.paymentInfo.amount, [Validators.required]],\n      relationship: [user.relationship, [Validators.required]],\n      description: [user.paymentInfo.description, [Validators.required]],\n      password: [\"\", [Validators.minLength(5)]],\n      confirmPassword: [\"\"],\n    },\n      {\n        validator: MustMatch(\"password\", \"confirmPassword\"),\n      });\n  }\n\n  onSubmit() {\n    this.submitted = true\n    if (this.studentForm.invalid) return;\n    else {\n      if (this.studentId) {\n        this.onUpdate();\n\n      } else {\n        this.onCreate();\n      }\n    }\n\n\n\n\n  }\n\n  getFinaldata() {\n    console.log(this.studentForm.value.year)\n    let student: any = {\n      username: this.studentForm.value.username,\n      email: this.studentForm.value.email,\n      dateOfBirth: this.studentForm.value.dateOfBirth,\n      gender: this.studentForm.value.gender,\n      year: this.studentForm.value.year.yearId,\n      relationship: this.studentForm.value.relationship,\n      password: this.studentForm.value.password,\n      role: Role.Student,\n      paymentInfo: {\n        amount: this.studentForm.value.paidAmount,\n        months: this.months,\n        description: this.studentForm.value.description,\n        payDate: new Date()\n      }\n    }\n    let getImg = document.getElementById(\"blobUrl\");\n    let img;\n    img =\n      getImg != undefined\n        ? document.getElementById(\"blobUrl\").getAttribute(\"src\")\n        : (img = this.uploadCrop);\n    if (img != undefined) {\n      let ulFile = this.dataURItoBlob(img);\n      student.file = ulFile;\n    }\n    return student;\n  }\n\n  onCreate() {\n    let student = this.getFinaldata();\n    this._userService.createStudent(student)\n      .subscribe(\n        (data: any) => {\n          this.addStudent.emit(data.response.student);\n          this.goBack();\n        },\n        error => {\n          console.log(error);\n          // this.loading = false;\n        });\n  }\n\n  onUpdate() {\n    let student = this.getFinaldata();\n    student.studentId = this.studentId;\n    this._userService.updateStudent(student)\n      .subscribe(\n        data => {\n          this.goBack();\n          // this.addStudent.emit({ id: '60352f7ab4a26e648146b0f3', username: student.username, year: year.name, relationship: student.relationship})\n          // this.displayStudentForm.emit(false)     \n        },\n        error => {\n          console.log(error);\n          // this.loading = false;\n        });\n  }\n  getYearList() {\n    this._yearService.getYearList()\n      .subscribe(\n        data => {\n          this.yearList = data.years;\n          // this.yearList = ('years' in data) ? data.years : []\n          // this.years = this.yearList.map( d => d.name )\n          //this.isLoading=false;\n        },\n        error => {\n          console.log(error);\n          // this.loading = false;\n        }\n      );\n  }\n\n  selectInstallmentMonths(mon) {\n    this.months = mon\n  }\n\n  get f() { return this.studentForm.controls }\n\n  changeYear(e) {\n    this.year.setValue(e.target.value, {\n      onlySelf: true\n    })\n  }\n\n  get year() {\n    return this.studentForm.get('year');\n  }\n\n  changeRelationship(e) {\n    this.rs.setValue(e.target.value, {\n      onlySelf: true\n    })\n  }\n\n  get rs() {\n    return this.studentForm.get('relationship');\n  }\n\n  goBack() {\n    if (this.studentId)\n      this._router.navigateByUrl('admin/users/student-management/student')\n    else\n      this.displayStudentForm.emit(false)\n  }\n\n  onImgLoad() {\n    this.isImgLoad = false;\n  }\n\n  uploadCropImg($event: any) {\n    var image: any = new Image();\n    this.blankCrop = true;\n    $(\".frame-upload\").css(\"display\", \"block\");\n    this.imgDemoSlider = true;\n    $(\"#upload-demo img:first\").remove();\n    this.input = $event.target.files[0];\n    // if (this.input.size <= 477732 && this.input) {\n    if (this.input && this.uploadCrop) {\n      this.uploadCrop.destroy();\n    }\n    var reader: FileReader = new FileReader();\n    this.uploadCrop = new Croppie(document.getElementById(\"upload-demo\"), {\n      viewport: {\n        width: 120,\n        height: 120,\n        type: \"circle\",\n      },\n      boundary: {\n        width: 120,\n        height: 120,\n      },\n      enableExif: true,\n    });\n\n    var $uploadCrop = this.uploadCrop;\n    reader.onload = function (e: any) {\n      $(\".upload-demo\").addClass(\"ready\");\n      $uploadCrop\n        .bind({\n          url: e.target.result,\n        })\n        .then(function (e: any) { });\n    };\n    reader.readAsDataURL($event.target.files[0]);\n  }\n\n  cropResult() {\n    this.validProfile = true;\n    this.isCrop = true;\n    let self = this;\n\n\n    this.imgDemoSlider = false;\n    setTimeout(function () {\n      $(\".circular-profile img:last-child\").attr(\"id\", \"blobUrl\");\n      $(\".frame-upload\").css(\"display\", \"none\");\n      this.blankCrop = false;\n    }, 200);\n\n    var cropper = this.uploadCrop;\n    var BlobUrl = this.dataURItoBlob;\n    this.uploadCrop\n      .result({\n        circle: false,\n        type: \"canvas\",\n        size: {\n          width: 120,\n          height: 120,\n        },\n        quality: 1,\n      })\n      .then(function (resp: any) {\n        if (resp) {\n          setTimeout(function () {\n            $(\".circular-profile i\").remove();\n            $(\".circular-profile img\").remove();\n\n            $(\".circular-profile\").append(\n              '<img src=\"' + resp + '\" width=\"100%\" />'\n            );\n          }, 100);\n        }\n      });\n  }\n\n  dataURItoBlob(dataURI: any) {\n    console.log(dataURI)\n    var byteString = atob(dataURI.split(',')[1]);\n    var mimeString = dataURI\n      .split(',')[0]\n      .split(':')[1]\n      .split(';')[0];\n    var ab = new ArrayBuffer(byteString.length);\n    var ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], { type: mimeString });\n  }\n\n  backToUpload() {\n    // this.hideMenu = true;\n    this.validProfile = false;\n    this.imgDemoSlider = false;\n    $(\".frame-upload\").css(\"display\", \"none\");\n  }\n\n\n}\n\n\nfunction MustMatch(controlName: string, matchingControlName: string) {\n  return (formGroup: FormGroup) => {\n    const control = formGroup.controls[controlName];\n    const matchingControl = formGroup.controls[matchingControlName];\n\n    if (matchingControl.errors && !matchingControl.errors.mustMatch) {\n      // return if another validator has already found an error on the matchingControl\n      return;\n    }\n\n    // set error on matchingControl if validation fails\n    if (control.value !== matchingControl.value) {\n      matchingControl.setErrors({ mustMatch: true });\n    } else {\n      matchingControl.setErrors(null);\n    }\n  };\n}","<div class=\"d-flex justify-content-between align-items-center mt-3\">\n    <app-route-direction [dirList]=\"routeDirLists\"></app-route-direction>\n</div>\n\n<form [formGroup]=\"studentForm\" class=\"col-md-8 mx-auto\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-md-6 form-group\">\n                <div class=\"row mb-3\">\n                    <div class=\"col-md-12\">\n                        <app-label>Name</app-label>\n                        <input type=\"text\" formControlName=\"username\" class=\"form-control input-style\"\n                            placeholder=\"Enter your name\"\n                            [ngClass]=\"{ 'is-invalid': submitted && f.username.errors }\" />\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-md-12\">\n                        <app-label>Email</app-label>\n                        <input type=\"email\" formControlName=\"email\" class=\"form-control input-style\"\n                            placeholder=\"Enter your email\" [ngClass]=\"{ 'is-invalid': submitted && f.email.errors }\" />\n                    </div>\n                </div>\n\n            </div>\n\n            <div class=\"col-md-6 form-group\">\n                <!-- <app-image-uploader></app-image-uploader> -->\n                <label for=\"upload\" class=\"d-flex justify-content-center w-100\">\n                    <div class=\"profile-box label-txt\" *ngIf=\"!imgDemoSlider\">\n                        <div class=\"circular-wrap\">\n                            <div class=\"circular-profile create\" *ngIf=\"!studentId\">\n                            </div>\n                            <div class=\"circular-profile\" *ngIf=\"studentId\">\n                                <app-profile-image-view [profileImg]=\"uploadImg\"></app-profile-image-view>\n                            </div>\n                        </div>\n                        <!-- </ng-template> -->\n                        <div class=\"demo-wrap upload-wrapper\">\n                            <div class=\"container\">\n                                <div class=\"grid\">\n                                    <div class=\"col-1-2\">\n                                        <div class=\"actions\">\n                                            <a class=\"btn file-btn\">\n                                                <input type=\"file\" class=\"upload-jpg form-control\" id=\"upload\" #cropper\n                                                    (change)=\"uploadCropImg($event)\" value=\"Choose a file\"\n                                                    accept=\"image/*\" style=\"display: none;\" />\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- <div class=\"bg-b100 text-0 medium-bold h4-m text-upload\">\n                                    Upload photo\n                                </div> -->\n                    </div>\n\n                    <div class=\"profile-box label-txt hidebox\" [ngClass]=\"{ showbox: imgDemoSlider == true }\">\n                        <div class=\"frame-upload\">\n                            <div class=\"upload-demo-wrap\">\n                                <div id=\"upload-demo\"></div>\n                            </div>\n                            <div class=\"d-flex img-footer\">\n                                <button *ngIf=\"blankCrop\" class=\"btn upload-result text-d200 demi-bold w-50\"\n                                    (click)=\"backToUpload()\">\n                                    Cancel\n                                </button>\n\n                                <button *ngIf=\"blankCrop\" class=\"btn upload-result text-b100 demi-bold w-50\"\n                                    id=\"sizeDisable\" (click)=\"cropResult()\" [value]=\"blankCrop\">\n                                    Crop\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </label>\n            </div>\n\n            <ng-template [ngIf]=\"!studentId || isChangePassword\">\n                <div class=\"col-md-6 form-group\">\n                    <app-label>Password</app-label>\n                    <input type=\"password\" formControlName=\"password\" class=\"form-control input-style\"\n                        placeholder=\"Enter your password\"\n                        [ngClass]=\"{ 'is-invalid': submitted && f.password.errors }\" />\n                </div>\n                <div class=\"col-md-6 form-group\">\n                    <app-label>Confirm Password</app-label>\n                    <input type=\"password\" formControlName=\"confirmPassword\" class=\"form-control input-style\"\n                        placeholder=\"Enter your confirm password\"\n                        [ngClass]=\"{ 'is-invalid': submitted && f.confirmPassword.errors }\" />\n                </div>\n            </ng-template>\n            <div class=\"col-md-12\">\n                <button class=\"btn btn-pwd\" (click)=\"isChangePassword=true\"\n                    *ngIf=\"!isChangePassword && studentId\">Change Password</button>\n\n            </div>\n            <div class=\"col-md-6 form-group\">\n                <app-label>Date of Birth</app-label>\n                <input type=\"date\" formControlName=\"dateOfBirth\" class=\"form-control\"\n                    [ngClass]=\"{ 'is-invalid': submitted && f.dateOfBirth.errors }\">\n            </div>\n\n            <div class=\"col-md-6 form-group\">\n                <app-label>Gender</app-label>\n                <div class=\"d-flex\">\n                    <div class=\"mr-3\">\n                        <label class=\"radio-container\">\n                            <div> Male</div>\n                            <input id=\"male\" type=\"radio\" value=\"male\" name=\"gender\" formControlName=\"gender\"\n                                class=\"input-radio\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                    </div>\n                    <div class=\"mr-3\">\n                        <label class=\"radio-container\">\n                            <div>Female</div>\n                            <input id=\"female\" type=\"radio\" value=\"female\" name=\"gender\" formControlName=\"gender\"\n                                class=\"input-radio\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"col-md-6 form-group\">\n                <app-label>Year</app-label>\n                <select formControlName=\"year\" class=\"form-control selected-box\"\n                    [ngClass]=\"{ 'is-invalid': submitted && f.year.errors }\">\n                    <option value=\"\" disabled selected>Select Year</option>\n                    <option *ngFor=\"let yr of yearList\" [ngValue]=\"yr\">{{yr.name}}</option>\n                </select>\n            </div>\n\n            <div class=\"col-md-6 form-group\">\n                <app-label>Paid Amount</app-label>\n                <input type=\"text\" formControlName=\"paidAmount\" class=\"form-control input-style\"\n                    placeholder=\"Enter Paid Amount\" [ngClass]=\"{ 'is-invalid': submitted && f.paidAmount.errors }\"\n                    oninput=\"this.value = this.value.replace(/[^0-9.]/g,\n            '').replace(/(\\..*)\\./g, '$1');\">\n            </div>\n\n            <div class=\"col-md-6 form-group\">\n                <app-label>Payment Installment Months</app-label>\n                <app-installment-month-list [months]=\"months\"\n                    (selectInstallmentMonths)=\"selectInstallmentMonths($event)\"></app-installment-month-list>\n            </div>\n\n            <div class=\"col-md-6 form-group\">\n                <app-label>Relationship</app-label>\n                <select formControlName=\"relationship\" class=\"form-control selected-box\"\n                    [ngClass]=\"{ 'is-invalid': submitted && f.relationship.errors }\">\n                    <option value=\"\" disabled selected>Select Relationship</option>\n                    <option *ngFor=\"let rs of relationship\" [ngValue]=\"rs\">{{rs}}</option>\n                </select>\n            </div>\n\n            <div class=\"col-md-6 form-group\">\n                <app-label>Description</app-label>\n                <textarea formControlName=\"description\" class=\"form-control\" rows=\"4\" placeholder=\"Enter description\"\n                    [ngClass]=\"{ 'is-invalid': submitted && f.description.errors }\"></textarea>\n            </div>\n\n        </div>\n    </div>\n\n    <div class=\"d-flex justify-content-end\">\n        <div class=\"d-flex m-2 flex-column\">\n            <!-- <cancel-btn (onClick)=\"goBack()\" [btnSize]=\"'btn-medium'\">Cancel</cancel-btn> -->\n            <cancel-btn [btnSize]=\"'btn-lg'\" (onClick)=\"goBack()\">Cancel</cancel-btn>\n        </div>\n        <div class=\"d-flex m-2 flex-column\">\n            <primary-btn (click)=\"onSubmit()\">{{studentId ? 'Update' : 'Create'}}</primary-btn>\n        </div>\n    </div>\n\n\n</form>","/*************************\r\n * Croppie\r\n * Copyright 2019\r\n * Foliotek\r\n * Version: 2.6.5\r\n *************************/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(factory);\r\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\r\n        // CommonJS\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals\r\n        root.Croppie = factory();\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function () {\r\n\r\n    /* Polyfills */\r\n    if (typeof Promise !== 'function') {\r\n        /*! promise-polyfill 3.1.0 */\r\n        !function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!==typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!==typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"===typeof a||\"function\"===typeof a)){var c=a.then;if(\"function\"===typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"===typeof a?a:null,this.onRejected=\"function\"===typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k=\"function\"===typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"===typeof g||\"function\"===typeof g)){var h=g.then;if(\"function\"===typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"===typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},\"undefined\"!==typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);\r\n    }\r\n\r\n    if (typeof window !== 'undefined' && typeof window.CustomEvent !== \"function\") {\r\n        (function(){\r\n            function CustomEvent ( event, params ) {\r\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n                var evt = document.createEvent( 'CustomEvent' );\r\n                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n                return evt;\r\n            }\r\n            CustomEvent.prototype = window.Event.prototype;\r\n            window.CustomEvent = CustomEvent;\r\n        }());\r\n    }\r\n\r\n    if (typeof HTMLCanvasElement !== 'undefined' && !HTMLCanvasElement.prototype.toBlob) {\r\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n            value: function (callback, type, quality) {\r\n                var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n                len = binStr.length,\r\n                arr = new Uint8Array(len);\r\n\r\n                for (var i=0; i<len; i++ ) {\r\n                    arr[i] = binStr.charCodeAt(i);\r\n                }\r\n\r\n                callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n            }\r\n        });\r\n    }\r\n    /* End Polyfills */\r\n\r\n    var cssPrefixes = ['Webkit', 'Moz', 'ms'],\r\n        emptyStyles = typeof document !== 'undefined' ? document.createElement('div').style : {},\r\n        EXIF_NORM = [1,8,3,6],\r\n        EXIF_FLIP = [2,7,4,5],\r\n        CSS_TRANS_ORG,\r\n        CSS_TRANSFORM,\r\n        CSS_USERSELECT;\r\n\r\n    function vendorPrefix(prop) {\r\n        if (prop in emptyStyles) {\r\n            return prop;\r\n        }\r\n\r\n        var capProp = prop[0].toUpperCase() + prop.slice(1),\r\n            i = cssPrefixes.length;\r\n\r\n        while (i--) {\r\n            prop = cssPrefixes[i] + capProp;\r\n            if (prop in emptyStyles) {\r\n                return prop;\r\n            }\r\n        }\r\n    }\r\n\r\n    CSS_TRANSFORM = vendorPrefix('transform');\r\n    CSS_TRANS_ORG = vendorPrefix('transformOrigin');\r\n    CSS_USERSELECT = vendorPrefix('userSelect');\r\n\r\n    function getExifOffset(ornt, rotate) {\r\n        var arr = EXIF_NORM.indexOf(ornt) > -1 ? EXIF_NORM : EXIF_FLIP,\r\n            index = arr.indexOf(ornt),\r\n            offset = (rotate / 90) % arr.length;// 180 = 2%4 = 2 shift exif by 2 indexes\r\n\r\n        return arr[(arr.length + index + (offset % arr.length)) % arr.length];\r\n    }\r\n\r\n    // Credits to : Andrew Dupont - http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\r\n    function deepExtend(destination, source) {\r\n        destination = destination || {};\r\n        for (var property in source) {\r\n            if (source[property] && source[property].constructor && source[property].constructor === Object) {\r\n                destination[property] = destination[property] || {};\r\n                deepExtend(destination[property], source[property]);\r\n            } else {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    function clone(object) {\r\n        return deepExtend({}, object);\r\n    }\r\n\r\n    function debounce(func, wait, immediate) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    function dispatchChange(element) {\r\n        if (\"createEvent\" in document) {\r\n            var evt = document.createEvent(\"HTMLEvents\");\r\n            evt.initEvent(\"change\", false, true);\r\n            element.dispatchEvent(evt);\r\n        }\r\n        else {\r\n            element.fireEvent(\"onchange\");\r\n        }\r\n    }\r\n\r\n    //http://jsperf.com/vanilla-css\r\n    function css(el, styles, val) {\r\n        if (typeof (styles) === 'string') {\r\n            var tmp = styles;\r\n            styles = {};\r\n            styles[tmp] = val;\r\n        }\r\n\r\n        for (var prop in styles) {\r\n            el.style[prop] = styles[prop];\r\n        }\r\n    }\r\n\r\n    function addClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.add(c);\r\n        }\r\n        else {\r\n            el.className += ' ' + c;\r\n        }\r\n    }\r\n\r\n    function removeClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.remove(c);\r\n        }\r\n        else {\r\n            el.className = el.className.replace(c, '');\r\n        }\r\n    }\r\n\r\n    function setAttributes(el, attrs) {\r\n        for (var key in attrs) {\r\n            el.setAttribute(key, attrs[key]);\r\n        }\r\n    }\r\n\r\n    function num(v) {\r\n        return parseInt(v, 10);\r\n    }\r\n\r\n    /* Utilities */\r\n    function loadImage(src, doExif) {\r\n        if (!src) { throw 'Source image missing'; }\r\n        \r\n        var img = new Image();\r\n        img.style.opacity = '0';\r\n        return new Promise(function (resolve, reject) {\r\n            function _resolve() {\r\n                img.style.opacity = '1';\r\n                setTimeout(function () {\r\n                    resolve(img);\r\n                }, 1);\r\n            }\r\n\r\n            img.removeAttribute('crossOrigin');\r\n            if (src.match(/^https?:\\/\\/|^\\/\\//)) {\r\n                img.setAttribute('crossOrigin', 'anonymous');\r\n            }\r\n\r\n            img.onload = function () {\r\n                if (doExif) {\r\n                    EXIF.getData(img, function () {\r\n                        _resolve();\r\n                    });\r\n                }\r\n                else {\r\n                    _resolve();\r\n                }\r\n            };\r\n            img.onerror = function (ev) {\r\n                img.style.opacity = 1;\r\n                setTimeout(function () {\r\n                    reject(ev);\r\n                }, 1);\r\n            };\r\n            img.src = src;\r\n        });\r\n    }\r\n\r\n    function naturalImageDimensions(img, ornt) {\r\n        var w = img.naturalWidth;\r\n        var h = img.naturalHeight;\r\n        var orient = ornt || getExifOrientation(img);\r\n        if (orient && orient >= 5) {\r\n            var x= w;\r\n            w = h;\r\n            h = x;\r\n        }\r\n        return { width: w, height: h };\r\n    }\r\n\r\n    /* CSS Transform Prototype */\r\n    var TRANSLATE_OPTS = {\r\n        'translate3d': {\r\n            suffix: ', 0px'\r\n        },\r\n        'translate': {\r\n            suffix: ''\r\n        }\r\n    };\r\n    var Transform = function (x, y, scale) {\r\n        this.x = parseFloat(x);\r\n        this.y = parseFloat(y);\r\n        this.scale = parseFloat(scale);\r\n    };\r\n\r\n    Transform.parse = function (v) {\r\n        if (v.style) {\r\n            return Transform.parse(v.style[CSS_TRANSFORM]);\r\n        }\r\n        else if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\r\n            return Transform.fromMatrix(v);\r\n        }\r\n        else {\r\n            return Transform.fromString(v);\r\n        }\r\n    };\r\n\r\n    Transform.fromMatrix = function (v) {\r\n        var vals = v.substring(7).split(',');\r\n        if (!vals.length || v === 'none') {\r\n            vals = [1, 0, 0, 1, 0, 0];\r\n        }\r\n\r\n        return new Transform(num(vals[4]), num(vals[5]), parseFloat(vals[0]));\r\n    };\r\n\r\n    Transform.fromString = function (v) {\r\n        var values = v.split(') '),\r\n            translate = values[0].substring(Croppie.globals.translate.length + 1).split(','),\r\n            scale = values.length > 1 ? values[1].substring(6) : 1,\r\n            x = translate.length > 1 ? translate[0] : 0,\r\n            y = translate.length > 1 ? translate[1] : 0;\r\n\r\n        return new Transform(x, y, scale);\r\n    };\r\n\r\n    Transform.prototype.toString = function () {\r\n        var suffix = TRANSLATE_OPTS[Croppie.globals.translate].suffix || '';\r\n        return Croppie.globals.translate + '(' + this.x + 'px, ' + this.y + 'px' + suffix + ') scale(' + this.scale + ')';\r\n    };\r\n\r\n    var TransformOrigin = function (el) {\r\n        if (!el || !el.style[CSS_TRANS_ORG]) {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            return;\r\n        }\r\n        var css = el.style[CSS_TRANS_ORG].split(' ');\r\n        this.x = parseFloat(css[0]);\r\n        this.y = parseFloat(css[1]);\r\n    };\r\n\r\n    TransformOrigin.prototype.toString = function () {\r\n        return this.x + 'px ' + this.y + 'px';\r\n    };\r\n\r\n    function getExifOrientation (img) {\r\n        return img.exifdata && img.exifdata.Orientation ? num(img.exifdata.Orientation) : 1;\r\n    }\r\n\r\n    function drawCanvas(canvas, img, orientation) {\r\n        var width = img.width,\r\n            height = img.height,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        ctx.save();\r\n        switch (orientation) {\r\n          case 2:\r\n             ctx.translate(width, 0);\r\n             ctx.scale(-1, 1);\r\n             break;\r\n\r\n          case 3:\r\n              ctx.translate(width, height);\r\n              ctx.rotate(180*Math.PI/180);\r\n              break;\r\n\r\n          case 4:\r\n              ctx.translate(0, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 5:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 6:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.translate(0, -height);\r\n              break;\r\n\r\n          case 7:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(-90*Math.PI/180);\r\n              ctx.translate(-width, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 8:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.translate(0, width);\r\n              ctx.rotate(-90*Math.PI/180);\r\n              break;\r\n        }\r\n        ctx.drawImage(img, 0,0, width, height);\r\n        ctx.restore();\r\n    }\r\n\r\n    /* Private Methods */\r\n    function _create() {\r\n        var self = this,\r\n            contClass = 'croppie-container',\r\n            customViewportClass = self.options.viewport.type ? 'cr-vp-' + self.options.viewport.type : null,\r\n            boundary, img, viewport, overlay, bw, bh;\r\n\r\n        self.options.useCanvas = self.options.enableOrientation || _hasExif.call(self);\r\n        // Properties on class\r\n        self.data = {};\r\n        self.elements = {};\r\n\r\n        boundary = self.elements.boundary = document.createElement('div');\r\n        viewport = self.elements.viewport = document.createElement('div');\r\n        img = self.elements.img = document.createElement('img');\r\n        overlay = self.elements.overlay = document.createElement('div');\r\n\r\n        if (self.options.useCanvas) {\r\n            self.elements.canvas = document.createElement('canvas');\r\n            self.elements.preview = self.elements.canvas;\r\n        }\r\n        else {\r\n            self.elements.preview = img;\r\n        }\r\n\r\n        addClass(boundary, 'cr-boundary');\r\n        boundary.setAttribute('aria-dropeffect', 'none');\r\n        bw = self.options.boundary.width;\r\n        bh = self.options.boundary.height;\r\n        css(boundary, {\r\n            width: (bw + (isNaN(bw) ? '' : 'px')),\r\n            height: (bh + (isNaN(bh) ? '' : 'px'))\r\n        });\r\n\r\n        addClass(viewport, 'cr-viewport');\r\n        if (customViewportClass) {\r\n            addClass(viewport, customViewportClass);\r\n        }\r\n        css(viewport, {\r\n            width: self.options.viewport.width + 'px',\r\n            height: self.options.viewport.height + 'px'\r\n        });\r\n        viewport.setAttribute('tabindex', 0);\r\n\r\n        addClass(self.elements.preview, 'cr-image');\r\n        setAttributes(self.elements.preview, { 'alt': 'preview', 'aria-grabbed': 'false' });\r\n        addClass(overlay, 'cr-overlay');\r\n\r\n        self.element.appendChild(boundary);\r\n        boundary.appendChild(self.elements.preview);\r\n        boundary.appendChild(viewport);\r\n        boundary.appendChild(overlay);\r\n\r\n        addClass(self.element, contClass);\r\n        if (self.options.customClass) {\r\n            addClass(self.element, self.options.customClass);\r\n        }\r\n\r\n        _initDraggable.call(this);\r\n\r\n        if (self.options.enableZoom) {\r\n            _initializeZoom.call(self);\r\n        }\r\n\r\n        // if (self.options.enableOrientation) {\r\n        //     _initRotationControls.call(self);\r\n        // }\r\n\r\n        if (self.options.enableResize) {\r\n            _initializeResize.call(self);\r\n        }\r\n    }\r\n\r\n    // function _initRotationControls () {\r\n    //     var self = this,\r\n    //         wrap, btnLeft, btnRight, iLeft, iRight;\r\n\r\n    //     wrap = document.createElement('div');\r\n    //     self.elements.orientationBtnLeft = btnLeft = document.createElement('button');\r\n    //     self.elements.orientationBtnRight = btnRight = document.createElement('button');\r\n\r\n    //     wrap.appendChild(btnLeft);\r\n    //     wrap.appendChild(btnRight);\r\n\r\n    //     iLeft = document.createElement('i');\r\n    //     iRight = document.createElement('i');\r\n    //     btnLeft.appendChild(iLeft);\r\n    //     btnRight.appendChild(iRight);\r\n\r\n    //     addClass(wrap, 'cr-rotate-controls');\r\n    //     addClass(btnLeft, 'cr-rotate-l');\r\n    //     addClass(btnRight, 'cr-rotate-r');\r\n\r\n    //     self.elements.boundary.appendChild(wrap);\r\n\r\n    //     btnLeft.addEventListener('click', function () {\r\n    //         self.rotate(-90);\r\n    //     });\r\n    //     btnRight.addEventListener('click', function () {\r\n    //         self.rotate(90);\r\n    //     });\r\n    // }\r\n\r\n    function _hasExif() {\r\n        return this.options.enableExif && window.EXIF;\r\n    }\r\n\r\n    function _initializeResize () {\r\n        var self = this;\r\n        var wrap = document.createElement('div');\r\n        var isDragging = false;\r\n        var direction;\r\n        var originalX;\r\n        var originalY;\r\n        var minSize = 50;\r\n        var maxWidth;\r\n        var maxHeight;\r\n        var vr;\r\n        var hr;\r\n\r\n        addClass(wrap, 'cr-resizer');\r\n        css(wrap, {\r\n            width: this.options.viewport.width + 'px',\r\n            height: this.options.viewport.height + 'px'\r\n        });\r\n\r\n        if (this.options.resizeControls.height) {\r\n            vr = document.createElement('div');\r\n            addClass(vr, 'cr-resizer-vertical');\r\n            wrap.appendChild(vr);\r\n        }\r\n\r\n        if (this.options.resizeControls.width) {\r\n            hr = document.createElement('div');\r\n            addClass(hr, 'cr-resizer-horisontal');\r\n            wrap.appendChild(hr);\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) {\r\n                return;\r\n            }\r\n\r\n            var overlayRect = self.elements.overlay.getBoundingClientRect();\r\n\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n            direction = ev.currentTarget.className.indexOf('vertical') !== -1 ? 'v' : 'h';\r\n            maxWidth = overlayRect.width;\r\n            maxHeight = overlayRect.height;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            var pageX = ev.pageX;\r\n            var pageY = ev.pageY;\r\n\r\n            ev.preventDefault();\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX;\r\n            var deltaY = pageY - originalY;\r\n            var newHeight = self.options.viewport.height + deltaY;\r\n            var newWidth = self.options.viewport.width + deltaX;\r\n\r\n            if (direction === 'v' && newHeight >= minSize && newHeight <= maxHeight) {\r\n                css(wrap, {\r\n                    height: newHeight + 'px'\r\n                });\r\n\r\n                self.options.boundary.height += deltaY;\r\n                css(self.elements.boundary, {\r\n                    height: self.options.boundary.height + 'px'\r\n                });\r\n\r\n                self.options.viewport.height += deltaY;\r\n                css(self.elements.viewport, {\r\n                    height: self.options.viewport.height + 'px'\r\n                });\r\n            }\r\n            else if (direction === 'h' && newWidth >= minSize && newWidth <= maxWidth) {\r\n                css(wrap, {\r\n                    width: newWidth + 'px'\r\n                });\r\n\r\n                self.options.boundary.width += deltaX;\r\n                css(self.elements.boundary, {\r\n                    width: self.options.boundary.width + 'px'\r\n                });\r\n\r\n                self.options.viewport.width += deltaX;\r\n                css(self.elements.viewport, {\r\n                    width: self.options.viewport.width + 'px'\r\n                });\r\n            }\r\n\r\n            _updateOverlay.call(self);\r\n            _updateZoomLimits.call(self);\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n        }\r\n\r\n        if (vr) {\r\n            vr.addEventListener('mousedown', mouseDown);\r\n            vr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        if (hr) {\r\n            hr.addEventListener('mousedown', mouseDown);\r\n            hr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        this.elements.boundary.appendChild(wrap);\r\n    }\r\n\r\n    function _setZoomerVal(v) {\r\n        if (this.options.enableZoom) {\r\n            var z = this.elements.zoomer,\r\n                val = fix(v, 4);\r\n\r\n            z.value = Math.max(parseFloat(z.min), Math.min(parseFloat(z.max), val)).toString();\r\n        }\r\n    }\r\n\r\n    function _initializeZoom() {\r\n        var self = this,\r\n            wrap = self.elements.zoomerWrap = document.createElement('div'),\r\n            zoomer = self.elements.zoomer = document.createElement('input');\r\n\r\n        addClass(wrap, 'cr-slider-wrap');\r\n        addClass(zoomer, 'cr-slider');\r\n        zoomer.type = 'range';\r\n        zoomer.step = '0.0001';\r\n        zoomer.value = '1';\r\n        zoomer.style.display = self.options.showZoomer ? '' : 'none';\r\n        zoomer.setAttribute('aria-label', 'zoom');\r\n\r\n        self.element.appendChild(wrap);\r\n        wrap.appendChild(zoomer);\r\n\r\n        self._currentZoom = 1;\r\n\r\n        function change() {\r\n            _onZoom.call(self, {\r\n                value: parseFloat(zoomer.value),\r\n                origin: new TransformOrigin(self.elements.preview),\r\n                viewportRect: self.elements.viewport.getBoundingClientRect(),\r\n                transform: Transform.parse(self.elements.preview)\r\n            });\r\n        }\r\n\r\n        function scroll(ev) {\r\n            var delta, targetZoom;\r\n\r\n            if(self.options.mouseWheelZoom === 'ctrl' && ev.ctrlKey !== true){\r\n              return 0;\r\n            } else if (ev.wheelDelta) {\r\n                delta = ev.wheelDelta / 1200; //wheelDelta min: -120 max: 120 // max x 10 x 2\r\n            } else if (ev.deltaY) {\r\n                delta = ev.deltaY / 1060; //deltaY min: -53 max: 53 // max x 10 x 2\r\n            } else if (ev.detail) {\r\n                delta = ev.detail / -60; //delta min: -3 max: 3 // max x 10 x 2\r\n            } else {\r\n                delta = 0;\r\n            }\r\n\r\n            targetZoom = self._currentZoom + (delta * self._currentZoom);\r\n\r\n            ev.preventDefault();\r\n            _setZoomerVal.call(self, targetZoom);\r\n            change.call(self);\r\n        }\r\n\r\n        self.elements.zoomer.addEventListener('input', change);// this is being fired twice on keypress\r\n        self.elements.zoomer.addEventListener('change', change);\r\n\r\n        if (self.options.mouseWheelZoom) {\r\n            self.elements.boundary.addEventListener('mousewheel', scroll);\r\n            self.elements.boundary.addEventListener('DOMMouseScroll', scroll);\r\n        }\r\n    }\r\n\r\n    function _onZoom(ui) {\r\n        var self = this,\r\n            transform = ui ? ui.transform : Transform.parse(self.elements.preview),\r\n            vpRect = ui ? ui.viewportRect : self.elements.viewport.getBoundingClientRect(),\r\n            origin = ui ? ui.origin : new TransformOrigin(self.elements.preview);\r\n\r\n        function applyCss() {\r\n            var transCss = {};\r\n            transCss[CSS_TRANSFORM] = transform.toString();\r\n            transCss[CSS_TRANS_ORG] = origin.toString();\r\n            css(self.elements.preview, transCss);\r\n        }\r\n\r\n        self._currentZoom = ui ? ui.value : self._currentZoom;\r\n        transform.scale = self._currentZoom;\r\n        self.elements.zoomer.setAttribute('aria-valuenow', self._currentZoom);\r\n        applyCss();\r\n\r\n        if (self.options.enforceBoundary) {\r\n            var boundaries = _getVirtualBoundaries.call(self, vpRect),\r\n                transBoundaries = boundaries.translate,\r\n                oBoundaries = boundaries.origin;\r\n\r\n            if (transform.x >= transBoundaries.maxX) {\r\n                origin.x = oBoundaries.minX;\r\n                transform.x = transBoundaries.maxX;\r\n            }\r\n\r\n            if (transform.x <= transBoundaries.minX) {\r\n                origin.x = oBoundaries.maxX;\r\n                transform.x = transBoundaries.minX;\r\n            }\r\n\r\n            if (transform.y >= transBoundaries.maxY) {\r\n                origin.y = oBoundaries.minY;\r\n                transform.y = transBoundaries.maxY;\r\n            }\r\n\r\n            if (transform.y <= transBoundaries.minY) {\r\n                origin.y = oBoundaries.maxY;\r\n                transform.y = transBoundaries.minY;\r\n            }\r\n        }\r\n        applyCss();\r\n        _debouncedOverlay.call(self);\r\n        _triggerUpdate.call(self);\r\n    }\r\n\r\n    function _getVirtualBoundaries(viewport) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            vpWidth = viewport.width,\r\n            vpHeight = viewport.height,\r\n            centerFromBoundaryX = self.elements.boundary.clientWidth / 2,\r\n            centerFromBoundaryY = self.elements.boundary.clientHeight / 2,\r\n            imgRect = self.elements.preview.getBoundingClientRect(),\r\n            curImgWidth = imgRect.width,\r\n            curImgHeight = imgRect.height,\r\n            halfWidth = vpWidth / 2,\r\n            halfHeight = vpHeight / 2;\r\n\r\n        var maxX = ((halfWidth / scale) - centerFromBoundaryX) * -1;\r\n        var minX = maxX - ((curImgWidth * (1 / scale)) - (vpWidth * (1 / scale)));\r\n\r\n        var maxY = ((halfHeight / scale) - centerFromBoundaryY) * -1;\r\n        var minY = maxY - ((curImgHeight * (1 / scale)) - (vpHeight * (1 / scale)));\r\n\r\n        var originMinX = (1 / scale) * halfWidth;\r\n        var originMaxX = (curImgWidth * (1 / scale)) - originMinX;\r\n\r\n        var originMinY = (1 / scale) * halfHeight;\r\n        var originMaxY = (curImgHeight * (1 / scale)) - originMinY;\r\n\r\n        return {\r\n            translate: {\r\n                maxX: maxX,\r\n                minX: minX,\r\n                maxY: maxY,\r\n                minY: minY\r\n            },\r\n            origin: {\r\n                maxX: originMaxX,\r\n                minX: originMinX,\r\n                maxY: originMaxY,\r\n                minY: originMinY\r\n            }\r\n        };\r\n    }\r\n\r\n    function _updateCenterPoint(rotate) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            data = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            transform = Transform.parse(self.elements.preview.style[CSS_TRANSFORM]),\r\n            pc = new TransformOrigin(self.elements.preview),\r\n            top = (vpData.top - data.top) + (vpData.height / 2),\r\n            left = (vpData.left - data.left) + (vpData.width / 2),\r\n            center = {},\r\n            adj = {};\r\n\r\n        if (rotate) {\r\n            var cx = pc.x;\r\n            var cy = pc.y;\r\n            var tx = transform.x;\r\n            var ty = transform.y;\r\n\r\n            center.y = cx;\r\n            center.x = cy;\r\n            transform.y = tx;\r\n            transform.x = ty;\r\n        }\r\n        else {\r\n            center.y = top / scale;\r\n            center.x = left / scale;\r\n\r\n            adj.y = (center.y - pc.y) * (1 - scale);\r\n            adj.x = (center.x - pc.x) * (1 - scale);\r\n\r\n            transform.x -= adj.x;\r\n            transform.y -= adj.y;\r\n        }\r\n\r\n        var newCss = {};\r\n        newCss[CSS_TRANS_ORG] = center.x + 'px ' + center.y + 'px';\r\n        newCss[CSS_TRANSFORM] = transform.toString();\r\n        css(self.elements.preview, newCss);\r\n    }\r\n\r\n    function _initDraggable() {\r\n        var self = this,\r\n            isDragging = false,\r\n            originalX,\r\n            originalY,\r\n            originalDistance,\r\n            vpRect,\r\n            transform;\r\n\r\n        function assignTransformCoordinates(deltaX, deltaY) {\r\n            var imgRect = self.elements.preview.getBoundingClientRect(),\r\n                top = transform.y + deltaY,\r\n                left = transform.x + deltaX;\r\n\r\n            if (self.options.enforceBoundary) {\r\n                if (vpRect.top > imgRect.top + deltaY && vpRect.bottom < imgRect.bottom + deltaY) {\r\n                    transform.y = top;\r\n                }\r\n\r\n                if (vpRect.left > imgRect.left + deltaX && vpRect.right < imgRect.right + deltaX) {\r\n                    transform.x = left;\r\n                }\r\n            }\r\n            else {\r\n                transform.y = top;\r\n                transform.x = left;\r\n            }\r\n        }\r\n\r\n        function toggleGrabState(isDragging) {\r\n          self.elements.preview.setAttribute('aria-grabbed', isDragging);\r\n          self.elements.boundary.setAttribute('aria-dropeffect', isDragging? 'move': 'none');\r\n        }\r\n\r\n        function keyDown(ev) {\r\n            var LEFT_ARROW  = 37,\r\n                UP_ARROW    = 38,\r\n                RIGHT_ARROW = 39,\r\n                DOWN_ARROW  = 40;\r\n\r\n            if (ev.shiftKey && (ev.keyCode === UP_ARROW || ev.keyCode === DOWN_ARROW)) {\r\n                var zoom;\r\n                if (ev.keyCode === UP_ARROW) {\r\n                    zoom = parseFloat(self.elements.zoomer.value) + parseFloat(self.elements.zoomer.step)\r\n                }\r\n                else {\r\n                    zoom = parseFloat(self.elements.zoomer.value) - parseFloat(self.elements.zoomer.step)\r\n                }\r\n                self.setZoom(zoom);\r\n            }\r\n            else if (self.options.enableKeyMovement && (ev.keyCode >= 37 && ev.keyCode <= 40)) {\r\n                ev.preventDefault();\r\n                var movement = parseKeyDown(ev.keyCode);\r\n\r\n                transform = Transform.parse(self.elements.preview);\r\n                document.body.style[CSS_USERSELECT] = 'none';\r\n                vpRect = self.elements.viewport.getBoundingClientRect();\r\n                keyMove(movement);\r\n            }\r\n\r\n            function parseKeyDown(key) {\r\n                switch (key) {\r\n                    case LEFT_ARROW:\r\n                        return [1, 0];\r\n                    case UP_ARROW:\r\n                        return [0, 1];\r\n                    case RIGHT_ARROW:\r\n                        return [-1, 0];\r\n                    case DOWN_ARROW:\r\n                        return [0, -1];\r\n                }\r\n            }\r\n        }\r\n\r\n        function keyMove(movement) {\r\n            var deltaX = movement[0],\r\n                deltaY = movement[1],\r\n                newCss = {};\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) return;\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n            toggleGrabState(isDragging);\r\n            transform = Transform.parse(self.elements.preview);\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n            vpRect = self.elements.viewport.getBoundingClientRect();\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            ev.preventDefault();\r\n            var pageX = ev.pageX,\r\n                pageY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX,\r\n                deltaY = pageY - originalY,\r\n                newCss = {};\r\n\r\n            if (ev.type === 'touchmove') {\r\n                if (ev.touches.length > 1) {\r\n                    var touch1 = ev.touches[0];\r\n                    var touch2 = ev.touches[1];\r\n                    var dist = Math.sqrt((touch1.pageX - touch2.pageX) * (touch1.pageX - touch2.pageX) + (touch1.pageY - touch2.pageY) * (touch1.pageY - touch2.pageY));\r\n\r\n                    if (!originalDistance) {\r\n                        originalDistance = dist / self._currentZoom;\r\n                    }\r\n\r\n                    var scale = dist / originalDistance;\r\n\r\n                    _setZoomerVal.call(self, scale);\r\n                    dispatchChange(self.elements.zoomer);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            toggleGrabState(isDragging);\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        self.elements.overlay.addEventListener('mousedown', mouseDown);\r\n        self.elements.viewport.addEventListener('keydown', keyDown);\r\n        self.elements.overlay.addEventListener('touchstart', mouseDown);\r\n    }\r\n\r\n    function _updateOverlay() {\r\n        if (!this.elements) return; // since this is debounced, it can be fired after destroy\r\n        var self = this,\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        css(self.elements.overlay, {\r\n            width: imgData.width + 'px',\r\n            height: imgData.height + 'px',\r\n            top: (imgData.top - boundRect.top) + 'px',\r\n            left: (imgData.left - boundRect.left) + 'px'\r\n        });\r\n    }\r\n    var _debouncedOverlay = debounce(_updateOverlay, 500);\r\n\r\n    function _triggerUpdate() {\r\n        var self = this,\r\n            data = self.get();\r\n\r\n        if (!_isVisible.call(self)) {\r\n            return;\r\n        }\r\n\r\n        self.options.update.call(self, data);\r\n        if (self.$ && typeof Prototype === 'undefined') {\r\n            self.$(self.element).trigger('update.croppie', data);\r\n        }\r\n        else {\r\n            var ev;\r\n            if (window.CustomEvent) {\r\n                ev = new CustomEvent('update', { detail: data });\r\n            } else {\r\n                ev = document.createEvent('CustomEvent');\r\n                ev.initCustomEvent('update', true, true, data);\r\n            }\r\n\r\n            self.element.dispatchEvent(ev);\r\n        }\r\n    }\r\n\r\n    function _isVisible() {\r\n        return this.elements.preview.offsetHeight > 0 && this.elements.preview.offsetWidth > 0;\r\n    }\r\n\r\n    function _updatePropertiesFromImage() {\r\n        var self = this,\r\n            initialZoom = 1,\r\n            cssReset = {},\r\n            img = self.elements.preview,\r\n            imgData,\r\n            transformReset = new Transform(0, 0, initialZoom),\r\n            originReset = new TransformOrigin(),\r\n            isVisible = _isVisible.call(self);\r\n\r\n        if (!isVisible || self.data.bound) {// if the croppie isn't visible or it doesn't need binding\r\n            return;\r\n        }\r\n\r\n        self.data.bound = true;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        cssReset[CSS_TRANS_ORG] = originReset.toString();\r\n        cssReset['opacity'] = 1;\r\n        css(img, cssReset);\r\n\r\n        imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        self._originalImageWidth = imgData.width;\r\n        self._originalImageHeight = imgData.height;\r\n        self.data.orientation = _hasExif.call(self) ? getExifOrientation(self.elements.img) : self.data.orientation;\r\n\r\n        if (self.options.enableZoom) {\r\n            _updateZoomLimits.call(self, true);\r\n        }\r\n        else {\r\n            self._currentZoom = initialZoom;\r\n        }\r\n\r\n        transformReset.scale = self._currentZoom;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        css(img, cssReset);\r\n\r\n        if (self.data.points.length) {\r\n            _bindPoints.call(self, self.data.points);\r\n        }\r\n        else {\r\n            _centerImage.call(self);\r\n        }\r\n\r\n        _updateCenterPoint.call(self);\r\n        _updateOverlay.call(self);\r\n    }\r\n\r\n    function _updateZoomLimits (initial) {\r\n        var self = this,\r\n            minZoom = Math.max(self.options.minZoom, 0) || 0,\r\n            maxZoom = self.options.maxZoom || 1.5,\r\n            initialZoom,\r\n            defaultInitialZoom,\r\n            zoomer = self.elements.zoomer,\r\n            scale = parseFloat(zoomer.value),\r\n            boundaryData = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = naturalImageDimensions(self.elements.img, self.data.orientation),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            minW,\r\n            minH;\r\n        if (self.options.enforceBoundary) {\r\n            minW = vpData.width / imgData.width;\r\n            minH = vpData.height / imgData.height;\r\n            minZoom = Math.max(minW, minH);\r\n        }\r\n\r\n        if (minZoom >= maxZoom) {\r\n            maxZoom = minZoom + 1;\r\n        }\r\n\r\n        zoomer.min = fix(minZoom, 4);\r\n        zoomer.max = fix(maxZoom, 4);\r\n\r\n        if (!initial && (scale < zoomer.min || scale > zoomer.max)) {\r\n            _setZoomerVal.call(self, scale < zoomer.min ? zoomer.min : zoomer.max);\r\n        }\r\n        else if (initial) {\r\n            defaultInitialZoom = Math.max((boundaryData.width / imgData.width), (boundaryData.height / imgData.height));\r\n            initialZoom = self.data.boundZoom !== null ? self.data.boundZoom : defaultInitialZoom;\r\n            _setZoomerVal.call(self, initialZoom);\r\n        }\r\n\r\n        dispatchChange(zoomer);\r\n    }\r\n\r\n    function _bindPoints(points) {\r\n        if (points.length !== 4) {\r\n            throw \"Croppie - Invalid number of points supplied: \" + points;\r\n        }\r\n        var self = this,\r\n            pointsWidth = points[2] - points[0],\r\n            // pointsHeight = points[3] - points[1],\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            vpOffset = {\r\n                left: vpData.left - boundRect.left,\r\n                top: vpData.top - boundRect.top\r\n            },\r\n            scale = vpData.width / pointsWidth,\r\n            originTop = points[1],\r\n            originLeft = points[0],\r\n            transformTop = (-1 * points[1]) + vpOffset.top,\r\n            transformLeft = (-1 * points[0]) + vpOffset.left,\r\n            newCss = {};\r\n\r\n        newCss[CSS_TRANS_ORG] = originLeft + 'px ' + originTop + 'px';\r\n        newCss[CSS_TRANSFORM] = new Transform(transformLeft, transformTop, scale).toString();\r\n        css(self.elements.preview, newCss);\r\n\r\n        _setZoomerVal.call(self, scale);\r\n        self._currentZoom = scale;\r\n    }\r\n\r\n    function _centerImage() {\r\n        var self = this,\r\n            imgDim = self.elements.preview.getBoundingClientRect(),\r\n            vpDim = self.elements.viewport.getBoundingClientRect(),\r\n            boundDim = self.elements.boundary.getBoundingClientRect(),\r\n            vpLeft = vpDim.left - boundDim.left,\r\n            vpTop = vpDim.top - boundDim.top,\r\n            w = vpLeft - ((imgDim.width - vpDim.width) / 2),\r\n            h = vpTop - ((imgDim.height - vpDim.height) / 2),\r\n            transform = new Transform(w, h, self._currentZoom);\r\n\r\n        css(self.elements.preview, CSS_TRANSFORM, transform.toString());\r\n    }\r\n\r\n    function _transferImageToCanvas(customOrientation) {\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            img = self.elements.img,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        var orientation = self.options.enableOrientation && customOrientation || getExifOrientation(img);\r\n        drawCanvas(canvas, img, orientation);\r\n    }\r\n\r\n    function _getCanvas(data) {\r\n        var self = this,\r\n            points = data.points,\r\n            left = num(points[0]),\r\n            top = num(points[1]),\r\n            right = num(points[2]),\r\n            bottom = num(points[3]),\r\n            width = right-left,\r\n            height = bottom-top,\r\n            circle = data.circle,\r\n            canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            startX = 0,\r\n            startY = 0,\r\n            canvasWidth = data.outputWidth || width,\r\n            canvasHeight = data.outputHeight || height;\r\n\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n\r\n        if (data.backgroundColor) {\r\n            ctx.fillStyle = data.backgroundColor;\r\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        }\r\n\r\n        // By default assume we're going to draw the entire\r\n        // source image onto the destination canvas.\r\n        var sx = left,\r\n            sy = top,\r\n            sWidth = width,\r\n            sHeight = height,\r\n            dx = 0,\r\n            dy = 0,\r\n            dWidth = canvasWidth,\r\n            dHeight = canvasHeight;\r\n\r\n        //\r\n        // Do not go outside of the original image's bounds along the x-axis.\r\n        // Handle translations when projecting onto the destination canvas.\r\n        //\r\n\r\n        // The smallest possible source x-position is 0.\r\n        if (left < 0) {\r\n            sx = 0;\r\n            dx = (Math.abs(left) / width) * canvasWidth;\r\n        }\r\n\r\n        // The largest possible source width is the original image's width.\r\n        if (sWidth + sx > self._originalImageWidth) {\r\n            sWidth = self._originalImageWidth - sx;\r\n            dWidth =  (sWidth / width) * canvasWidth;\r\n        }\r\n\r\n        //\r\n        // Do not go outside of the original image's bounds along the y-axis.\r\n        //\r\n\r\n        // The smallest possible source y-position is 0.\r\n        if (top < 0) {\r\n            sy = 0;\r\n            dy = (Math.abs(top) / height) * canvasHeight;\r\n        }\r\n\r\n        // The largest possible source height is the original image's height.\r\n        if (sHeight + sy > self._originalImageHeight) {\r\n            sHeight = self._originalImageHeight - sy;\r\n            dHeight = (sHeight / height) * canvasHeight;\r\n        }\r\n\r\n        // console.table({ left, right, top, bottom, canvasWidth, canvasHeight, width, height, startX, startY, circle, sx, sy, dx, dy, sWidth, sHeight, dWidth, dHeight });\r\n\r\n        ctx.drawImage(this.elements.preview, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\r\n        if (circle) {\r\n            ctx.fillStyle = '#fff';\r\n            ctx.globalCompositeOperation = 'destination-in';\r\n            ctx.beginPath();\r\n            ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n        return canvas;\r\n    }\r\n\r\n    function _getHtmlResult(data) {\r\n        var points = data.points,\r\n            div = document.createElement('div'),\r\n            img = document.createElement('img'),\r\n            width = points[2] - points[0],\r\n            height = points[3] - points[1];\r\n\r\n        addClass(div, 'croppie-result');\r\n        div.appendChild(img);\r\n        css(img, {\r\n            left: (-1 * points[0]) + 'px',\r\n            top: (-1 * points[1]) + 'px'\r\n        });\r\n        img.src = data.url;\r\n        css(div, {\r\n            width: width + 'px',\r\n            height: height + 'px'\r\n        });\r\n\r\n        return div;\r\n    }\r\n\r\n    function _getBase64Result(data) {\r\n        return _getCanvas.call(this, data).toDataURL(data.format, data.quality);\r\n    }\r\n\r\n    function _getBlobResult(data) {\r\n        var self = this;\r\n        return new Promise(function (resolve) {\r\n            _getCanvas.call(self, data).toBlob(function (blob) {\r\n                resolve(blob);\r\n            }, data.format, data.quality);\r\n        });\r\n    }\r\n\r\n    function _replaceImage(img) {\r\n        if (this.elements.img.parentNode) {\r\n            Array.prototype.forEach.call(this.elements.img.classList, function(c) { img.classList.add(c); });\r\n            this.elements.img.parentNode.replaceChild(img, this.elements.img);\r\n            this.elements.preview = img; // if the img is attached to the DOM, they're not using the canvas\r\n        }\r\n        this.elements.img = img;\r\n    }\r\n\r\n    function _bind(options, cb) {\r\n        var self = this,\r\n            url,\r\n            points = [],\r\n            zoom = null,\r\n            hasExif = _hasExif.call(self);\r\n\r\n        if (typeof (options) === 'string') {\r\n            url = options;\r\n            options = {};\r\n        }\r\n        else if (Array.isArray(options)) {\r\n            points = options.slice();\r\n        }\r\n        else if (typeof (options) === 'undefined' && self.data.url) { //refreshing\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            return null;\r\n        }\r\n        else {\r\n            url = options.url;\r\n            points = options.points || [];\r\n            zoom = typeof(options.zoom) === 'undefined' ? null : options.zoom;\r\n        }\r\n\r\n        self.data.bound = false;\r\n        self.data.url = url || self.data.url;\r\n        self.data.boundZoom = zoom;\r\n\r\n        return loadImage(url, hasExif).then(function (img) {\r\n            _replaceImage.call(self, img);\r\n            if (!points.length) {\r\n                var natDim = naturalImageDimensions(img);\r\n                var rect = self.elements.viewport.getBoundingClientRect();\r\n                var aspectRatio = rect.width / rect.height;\r\n                var imgAspectRatio = natDim.width / natDim.height;\r\n                var width, height;\r\n\r\n                if (imgAspectRatio > aspectRatio) {\r\n                    height = natDim.height;\r\n                    width = height * aspectRatio;\r\n                }\r\n                else {\r\n                    width = natDim.width;\r\n                    height = natDim.height / aspectRatio;\r\n                }\r\n\r\n                var x0 = (natDim.width - width) / 2;\r\n                var y0 = (natDim.height - height) / 2;\r\n                var x1 = x0 + width;\r\n                var y1 = y0 + height;\r\n                self.data.points = [x0, y0, x1, y1];\r\n            }\r\n            else if (self.options.relative) {\r\n                points = [\r\n                    points[0] * img.naturalWidth / 100,\r\n                    points[1] * img.naturalHeight / 100,\r\n                    points[2] * img.naturalWidth / 100,\r\n                    points[3] * img.naturalHeight / 100\r\n                ];\r\n            }\r\n\r\n            self.data.orientation = options.orientation || 1;\r\n            self.data.points = points.map(function (p) {\r\n                return parseFloat(p);\r\n            });\r\n            if (self.options.useCanvas) {\r\n                _transferImageToCanvas.call(self, self.data.orientation);\r\n            }\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            cb && cb();\r\n        });\r\n    }\r\n\r\n    function fix(v, decimalPoints) {\r\n        return parseFloat(v).toFixed(decimalPoints || 0);\r\n    }\r\n\r\n    function _get() {\r\n        var self = this,\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            x1 = vpData.left - imgData.left,\r\n            y1 = vpData.top - imgData.top,\r\n            widthDiff = (vpData.width - self.elements.viewport.offsetWidth) / 2, //border\r\n            heightDiff = (vpData.height - self.elements.viewport.offsetHeight) / 2,\r\n            x2 = x1 + self.elements.viewport.offsetWidth + widthDiff,\r\n            y2 = y1 + self.elements.viewport.offsetHeight + heightDiff,\r\n            scale = self._currentZoom;\r\n\r\n        if (scale === Infinity || isNaN(scale)) {\r\n            scale = 1;\r\n        }\r\n\r\n        var max = self.options.enforceBoundary ? 0 : Number.NEGATIVE_INFINITY;\r\n        x1 = Math.max(max, x1 / scale);\r\n        y1 = Math.max(max, y1 / scale);\r\n        x2 = Math.max(max, x2 / scale);\r\n        y2 = Math.max(max, y2 / scale);\r\n\r\n        return {\r\n            points: [fix(x1), fix(y1), fix(x2), fix(y2)],\r\n            zoom: scale,\r\n            orientation: self.data.orientation\r\n        };\r\n    }\r\n\r\n    var RESULT_DEFAULTS = {\r\n            type: 'canvas',\r\n            format: 'png',\r\n            quality: 1\r\n        },\r\n        RESULT_FORMATS = ['jpeg', 'webp', 'png'];\r\n\r\n    function _result(options) {\r\n        var self = this,\r\n            data = _get.call(self),\r\n            opts = deepExtend(clone(RESULT_DEFAULTS), clone(options)),\r\n            resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\r\n            size = opts.size || 'viewport',\r\n            format = opts.format,\r\n            quality = opts.quality,\r\n            backgroundColor = opts.backgroundColor,\r\n            circle = typeof opts.circle === 'boolean' ? opts.circle : (self.options.viewport.type === 'circle'),\r\n            vpRect = self.elements.viewport.getBoundingClientRect(),\r\n            ratio = vpRect.width / vpRect.height,\r\n            prom;\r\n\r\n        if (size === 'viewport') {\r\n            data.outputWidth = vpRect.width;\r\n            data.outputHeight = vpRect.height;\r\n        } else if (typeof size === 'object') {\r\n            if (size.width && size.height) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.height;\r\n            } else if (size.width) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.width / ratio;\r\n            } else if (size.height) {\r\n                data.outputWidth = size.height * ratio;\r\n                data.outputHeight = size.height;\r\n            }\r\n        }\r\n\r\n        if (RESULT_FORMATS.indexOf(format) > -1) {\r\n            data.format = 'image/' + format;\r\n            data.quality = quality;\r\n        }\r\n\r\n        data.circle = circle;\r\n        data.url = self.data.url;\r\n        data.backgroundColor = backgroundColor;\r\n\r\n        prom = new Promise(function (resolve) {\r\n            switch(resultType.toLowerCase())\r\n            {\r\n                case 'rawcanvas':\r\n                    resolve(_getCanvas.call(self, data));\r\n                    break;\r\n                case 'canvas':\r\n                case 'base64':\r\n                    resolve(_getBase64Result.call(self, data));\r\n                    break;\r\n                case 'blob':\r\n                    _getBlobResult.call(self, data).then(resolve);\r\n                    break;\r\n                default:\r\n                    resolve(_getHtmlResult.call(self, data));\r\n                    break;\r\n            }\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    function _refresh() {\r\n        _updatePropertiesFromImage.call(this);\r\n    }\r\n\r\n    function _rotate(deg) {\r\n        if (!this.options.useCanvas || !this.options.enableOrientation) {\r\n            throw 'Croppie: Cannot rotate without enableOrientation && EXIF.js included';\r\n        }\r\n\r\n        var self = this,\r\n            canvas = self.elements.canvas;\r\n\r\n        self.data.orientation = getExifOffset(self.data.orientation, deg);\r\n        drawCanvas(canvas, self.elements.img, self.data.orientation);\r\n        _updateCenterPoint.call(self, true);\r\n        _updateZoomLimits.call(self);\r\n\r\n        // Reverses image dimensions if the degrees of rotation is not divisible by 180.\r\n        if ((Math.abs(deg) / 90) % 2 === 1) {\r\n            var oldHeight = self._originalImageHeight;\r\n            var oldWidth = self._originalImageWidth;\r\n            self._originalImageWidth = oldHeight;\r\n            self._originalImageHeight = oldWidth;\r\n        }\r\n    }\r\n\r\n    function _destroy() {\r\n        var self = this;\r\n        self.element.removeChild(self.elements.boundary);\r\n        removeClass(self.element, 'croppie-container');\r\n        if (self.options.enableZoom) {\r\n            self.element.removeChild(self.elements.zoomerWrap);\r\n        }\r\n        delete self.elements;\r\n    }\r\n\r\n    if (typeof window !== 'undefined' && window.jQuery) {\r\n        var $ = window.jQuery;\r\n        $.fn.croppie = function (opts) {\r\n            var ot = typeof opts;\r\n\r\n            if (ot === 'string') {\r\n                var args = Array.prototype.slice.call(arguments, 1);\r\n                var singleInst = $(this).data('croppie');\r\n\r\n                if (opts === 'get') {\r\n                    return singleInst.get();\r\n                }\r\n                else if (opts === 'result') {\r\n                    return singleInst.result.apply(singleInst, args);\r\n                }\r\n                else if (opts === 'bind') {\r\n                    return singleInst.bind.apply(singleInst, args);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    var i = $(this).data('croppie');\r\n                    if (!i) return;\r\n\r\n                    var method = i[opts];\r\n                    if ($.isFunction(method)) {\r\n                        method.apply(i, args);\r\n                        if (opts === 'destroy') {\r\n                            $(this).removeData('croppie');\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw 'Croppie ' + opts + ' method not found';\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                return this.each(function () {\r\n                    var i = new Croppie(this, opts);\r\n                    i.$ = $;\r\n                    $(this).data('croppie', i);\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function Croppie(element, opts) {\r\n        if (element.className.indexOf('croppie-container') > -1) {\r\n            throw new Error(\"Croppie: Can't initialize croppie more than once\");\r\n        }\r\n        this.element = element;\r\n        this.options = deepExtend(clone(Croppie.defaults), opts);\r\n\r\n        if (this.element.tagName.toLowerCase() === 'img') {\r\n            var origImage = this.element;\r\n            addClass(origImage, 'cr-original-image');\r\n            setAttributes(origImage, {'aria-hidden' : 'true', 'alt' : '' });\r\n            var replacementDiv = document.createElement('div');\r\n            this.element.parentNode.appendChild(replacementDiv);\r\n            replacementDiv.appendChild(origImage);\r\n            this.element = replacementDiv;\r\n            this.options.url = this.options.url || origImage.src;\r\n        }\r\n\r\n        _create.call(this);\r\n        if (this.options.url) {\r\n            var bindOpts = {\r\n                url: this.options.url,\r\n                points: this.options.points\r\n            };\r\n            delete this.options['url'];\r\n            delete this.options['points'];\r\n            _bind.call(this, bindOpts);\r\n        }\r\n    }\r\n\r\n    Croppie.defaults = {\r\n        viewport: {\r\n            width: 100,\r\n            height: 100,\r\n            type: 'square'\r\n        },\r\n        boundary: { },\r\n        orientationControls: {\r\n            enabled: true,\r\n            leftClass: '',\r\n            rightClass: ''\r\n        },\r\n        resizeControls: {\r\n            width: true,\r\n            height: true\r\n        },\r\n        customClass: '',\r\n        showZoomer: true,\r\n        enableZoom: true,\r\n        enableResize: false,\r\n        mouseWheelZoom: true,\r\n        enableExif: false,\r\n        enforceBoundary: true,\r\n        enableOrientation: false,\r\n        enableKeyMovement: true,\r\n        update: function () { }\r\n    };\r\n\r\n    Croppie.globals = {\r\n        translate: 'translate3d'\r\n    };\r\n\r\n    deepExtend(Croppie.prototype, {\r\n        bind: function (options, cb) {\r\n            return _bind.call(this, options, cb);\r\n        },\r\n        get: function () {\r\n            var data = _get.call(this);\r\n            var points = data.points;\r\n            if (this.options.relative) {\r\n                points[0] /= this.elements.img.naturalWidth / 100;\r\n                points[1] /= this.elements.img.naturalHeight / 100;\r\n                points[2] /= this.elements.img.naturalWidth / 100;\r\n                points[3] /= this.elements.img.naturalHeight / 100;\r\n            }\r\n            return data;\r\n        },\r\n        result: function (type) {\r\n            return _result.call(this, type);\r\n        },\r\n        refresh: function () {\r\n            return _refresh.call(this);\r\n        },\r\n        setZoom: function (v) {\r\n            _setZoomerVal.call(this, v);\r\n            dispatchChange(this.elements.zoomer);\r\n        },\r\n        rotate: function (deg) {\r\n            _rotate.call(this, deg);\r\n        },\r\n        destroy: function () {\r\n            return _destroy.call(this);\r\n        }\r\n    });\r\n    return Croppie;\r\n}));\r\n","export class User {\n    _id: String;\n    username: String;\n    email: String;\n    password: String;\n    role: String;\n    gender: String;\n    file: any;\n    phoneNumber: String;\n    dateOfBirth: String;\n    address: String;\n    relationship: String;\n    position: String;\n    education: String;\n    emergencyContact: String;\n    startDate: String;\n    createdDate: String;\n    updatedDate: String;\n    students:String;\n}\n\n\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\n// internal \nimport { UserService } from \"@core/services/user.service\";\nimport { AuthenticationService } from \"@core/authentication/authentication.service\";\nimport { Label, ActionLabel } from '@app/enum/app_enum';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-user-lists',\n  templateUrl: './user-lists.component.html',\n  styleUrls: ['./user-lists.component.css']\n})\nexport class UserListsComponent implements OnInit,OnDestroy {\n  public currentUserRole: String;\n  public searchData: String;\n  public selectedRouteRole: String;\n  public routeDirLists: any = {\n    routeName: [],\n    routeLink: []\n  };\n\n  public tableHeader = [Label.createDate, Label.name, Label.email, Label.phonenumber, Label.action];\n  public actionBtns = [ActionLabel.edit, ActionLabel.delete];\n  public objectLabel = [\"createdDate\", \"username\", \"email\", \"phoneNumber\"];\n  public filter: any = {};\n  public actionLinks: any = {\n    editLink: \"\",\n    deleteLink: \"users\",\n    idKeyname: \"userId\",\n  }\n  public limit: any = 10;\n  public page: any = 1;\n  public isAsc: boolean = true;\n  public userLists: any = {};\n  public totalCount: any;\n  public userId: any;\n  public subscription: Subscription;\n\n  constructor(private _userService: UserService,\n    private _auth: AuthenticationService,\n    private _activeRoute: ActivatedRoute,) { }\n\n  ngOnInit(): void {\n    this.currentUserRole = this._auth.currentUserValue.role.toLowerCase();\n\n    // get URL parameters\n    this._activeRoute.params.subscribe(params => {\n      this.filter = {\n        sortColumn: this.objectLabel[0],\n        sortDirection: \"asc\",\n        index: 0\n      };\n      this.userLists = null;\n\n      // this.routeDirLists = {};\n      this.selectedRouteRole = params.role.charAt(0).toUpperCase() + params.role.slice(1); // --> Name must match wanted parameter\n      this.routeDirLists.routeName.push(this.selectedRouteRole);\n\n      this.actionLinks.editLink = this.currentUserRole + \"/users/\" + this.selectedRouteRole.toLowerCase() + \"-management/edit/\" + this.selectedRouteRole.toLocaleLowerCase();\n      this.getUserLists();\n    });\n\n\n  }\n\n  getUserLists() {\n    this.subscription = this._userService.userLists(this.searchData, this.page, this.limit, this.filter.sortColumn, this.filter.sortDirection, this.selectedRouteRole)\n      .subscribe(\n        data => {\n          let temp: any = {};\n          temp.data = data.users;\n          temp.tableHeader = this.tableHeader;\n          temp.actionBtns = this.actionBtns;\n          temp.objectLabel = this.objectLabel;\n          temp.btnLink = this.actionLinks;\n          this.userLists = temp;\n          this.searchData = null;\n          this.totalCount = data.totalCount;\n        });\n  }\n\n  search(val: String) {\n\n    this.searchData = val;\n    setTimeout(() => {\n      this.getUserLists();\n    }, 200);\n\n  }\n\n  pageChanges(page: any) {\n    this.page = page;\n    setTimeout(() => {\n      this.getUserLists();\n    }, 200);\n  }\n\n  onFilter(e: any) {\n    this.filter = e;\n    this.getUserLists();\n  }\n\n  ngOnDestroy(){\n    this.subscription.unsubscribe();\n  }\n}\n","<div class=\"d-flex justify-content-between align-items-center mt-3\" *ngIf=\"userLists?.data\">\n    \n    <app-route-direction [dirList]=\"routeDirLists\"></app-route-direction>\n    <app-search-box (searchEmit)=\"search($event)\"></app-search-box>\n</div>\n\n<app-dynamic-table [tableData]=\"userLists\" [filter]=\"filter\" (setfilter)=\"onFilter($event)\" *ngIf=\"userLists?.data\"></app-dynamic-table>\n\n<!-- <app-spinner-loader *ngIf=\"isLoading==true\"></app-spinner-loader> -->\n\n<app-pagination [numberPerPage]=\"limit\" [numberOfPages]=\"page\" [totalCount]=\"totalCount\"\n (pageChange)=\"pageChanges($event)\" *ngIf=\"userLists?.data\"></app-pagination>","import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-student-view',\n  templateUrl: './student-view.component.html',\n  styleUrls: ['./student-view.component.css']\n})\nexport class StudentViewComponent implements OnInit {\n\n  @Input() student\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","\n  <div class=\"d-flex std-detail mb-3 mr-3\">\n    <div class=\"img-wrapper\">\n        <!-- <img src=\"{{student.image}}\"> -->\n        <app-profile-image-view [profileImg]=\"student.image\"></app-profile-image-view>\n    </div>\n    <div class=\"d-flex flex-column \">\n        <a>{{ student.username }}</a>\n        <span>{{  student.year }}</span>\n        <span>{{ student.relationship }}</span>\n    </div>\n  </div> \n"]}